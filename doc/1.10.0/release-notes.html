<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libxkbcommon: Release notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libxkbcommon<span id="projectnumber">&#160;1.10.0</span>
   </div>
   <div id="projectbrief">Library implementing the XKB specification for parsing                           keyboard descriptions and handling keyboard state</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Release notes</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#libxkbcommon-1100--2025-05-21">libxkbcommon 1.10.0 – 2025-05-21</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-192--2025-05-07">libxkbcommon 1.9.2 – 2025-05-07</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-191--2025-05-02">libxkbcommon 1.9.1 – 2025-05-02</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-190--2025-04-26">libxkbcommon 1.9.0 – 2025-04-26</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-181--2025-03-12">libxkbcommon 1.8.1 – 2025-03-12</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-180--2025-02-04">libxkbcommon 1.8.0 – 2025-02-04</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-170--2024-03-24">libxkbcommon 1.7.0 – 2024-03-24</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-160--2023-10-08">libxkbcommon 1.6.0 – 2023-10-08</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-150--2023-01-02">libxkbcommon 1.5.0 – 2023-01-02</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-141--2022-05-21">libxkbcommon 1.4.1 – 2022-05-21</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-140--2022-02-04">libxkbcommon 1.4.0 – 2022-02-04</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-131--2021-09-10">libxkbcommon 1.3.1 – 2021-09-10</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-130--2021-05-01">libxkbcommon 1.3.0 – 2021-05-01</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-121--2021-04-07">libxkbcommon 1.2.1 – 2021-04-07</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-120--2021-04-03">libxkbcommon 1.2.0 – 2021-04-03</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-110--2021-02-27">libxkbcommon 1.1.0 – 2021-02-27</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-103--2020-11-23">libxkbcommon 1.0.3 – 2020-11-23</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-102--2020-11-20">libxkbcommon 1.0.2 – 2020-11-20</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-101--2020-09-11">libxkbcommon 1.0.1 – 2020-09-11</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-100--2020-09-05">libxkbcommon 1.0.0 – 2020-09-05</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-0100--2020-01-18">libxkbcommon 0.10.0 – 2020-01-18</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-091--2019-10-19">libxkbcommon 0.9.1 – 2019-10-19</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-090--2019-10-19">libxkbcommon 0.9.0 – 2019-10-19</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-084--2019-02-22">libxkbcommon 0.8.4 – 2019-02-22</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-083--2019-02-08">libxkbcommon 0.8.3 – 2019-02-08</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-082--2018-08-05">libxkbcommon 0.8.2 – 2018-08-05</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-081--2018-08-03">libxkbcommon 0.8.1 – 2018-08-03</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-080--2017-12-15">libxkbcommon 0.8.0 – 2017-12-15</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-072--2017-08-04">libxkbcommon 0.7.2 – 2017-08-04</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-071--2017-01-18">libxkbcommon 0.7.1 – 2017-01-18</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-070--2016-11-11">libxkbcommon 0.7.0 – 2016-11-11</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-061--2016-04-08">libxkbcommon 0.6.1 – 2016-04-08</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-060--2016-03-16">libxkbcommon 0.6.0 – 2016-03-16</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-050--2014-10-18">libxkbcommon 0.5.0 – 2014-10-18</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-043--2014-08-19">libxkbcommon 0.4.3 – 2014-08-19</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-042--2014-05-15">libxkbcommon 0.4.2 – 2014-05-15</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-041--2014-03-27">libxkbcommon 0.4.1 – 2014-03-27</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-040--2014-02-02">libxkbcommon 0.4.0 – 2014-02-02</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-032--2013-11-22">libxkbcommon 0.3.2 – 2013-11-22</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-031--2013-06-03">libxkbcommon 0.3.1 – 2013-06-03</a>
  </li>
  <li class="level1">
    <a href="#libxkbcommon-030--2013-04-01">libxkbcommon 0.3.0 – 2013-04-01</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_doc_2release-notes"></a></p>
<h1><a class="anchor" id="libxkbcommon-1100--2025-05-21"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.10.0">1.10.0</a> – 2025-05-21</h1>
<h2><a class="anchor" id="api-2"></a>
API</h2>
<h3><a class="anchor" id="breaking-changes"></a>
Breaking changes</h3>
<ul>
<li><em>Modifiers masks</em> handling has been refactored to properly handle virtual modifiers. Modifier masks are now always considered as an <em>opaque encoding</em> of the modifiers state:<ul>
<li>Modifiers masks should not be interpreted by other means than the provided API. In particular, one should not assume that modifiers masks always denote the modifiers <em>indexes</em> of the keymap.</li>
<li>It enables using virtual modifiers with arbitrary mappings. E.g. one can now reliably create virtual modifiers without relying on the legacy X11 mechanism, that requires a careful use of keys’ real and virtual modmaps.</li>
<li>It enables <em>interoperability</em> with further implementations of XKB.</li>
</ul>
</li>
<li><p class="startli">Changed <em>Compose</em> behavior so that sequences defined later always override ones defined earlier, even if the new sequence is shorter.</p>
<p class="startli">Contributed by Jules Bertholet</p>
</li>
</ul>
<h3><a class="anchor" id="deprecated"></a>
Deprecated</h3>
<ul>
<li>Server applications using <code>xkb_state_update_mask()</code> should migrate to using <code>xkb_state_update_latched_locked()</code> instead, for proper handling of the keyboard state. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/310">#310</a>)</li>
<li><p class="startli">The following modifiers names in <code><a class="el" href="xkbcommon-names_8h.html" title="Predefined names for common modifiers and LEDs.">xkbcommon/xkbcommon-names.h</a></code> are now deprecated and will be removed in a future version:</p><ul>
<li><code>XKB_MOD_NAME_ALT</code>: use <code>XKB_VMOD_NAME_ALT</code> instead.</li>
<li><code>XKB_MOD_NAME_LOGO</code>: use <code>XKB_VMOD_NAME_SUPER</code> instead.</li>
<li><code>XKB_MOD_NAME_NUM</code>: use <code>XKB_VMOD_NAME_NUM</code> instead.</li>
</ul>
<p class="startli">(<a href="https://github.com/xkbcommon/libxkbcommon/issues/538">#538</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="new"></a>
New</h3>
<ul>
<li><p class="startli">Added <code>xkb_state_update_latched_locked()</code> to update the keyboard state to change the latched and locked state of the modifiers and layout.</p>
<p class="startli">This entry point is intended for <em>server</em> applications and should not be used by <em>client</em> applications. This can be use for e.g. a GUI layout switcher. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/310">#310</a>)</p>
</li>
<li>Added <code>xkb_keymap_mod_get_mask()</code> to query the mapping of a modifier.</li>
<li><p class="startli">Added <code>VoidAction()</code> action to match the keysym pair <code>NoSymbol</code>/<code>VoidSymbol</code>. It enables erasing a previous action and breaks latches.</p>
<p class="startli">This is a libxkbcommon extension. When serializing it will be converted to <code>LockControls(controls=none,affect=neither)</code> for backward compatibility. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/622">#622</a>)</p>
</li>
<li>Improved syntax errors in XKB files to include the expected/got tokens. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/644">#644</a>)</li>
</ul>
<h3><a class="anchor" id="fixes"></a>
Fixes</h3>
<ul>
<li><em>Compose</em>: fixed sequence not fully overriden if the new sequence has no keysym or string.</li>
</ul>
<h2><a class="anchor" id="tools-1"></a>
Tools</h2>
<h3><a class="anchor" id="new-1"></a>
New</h3>
<ul>
<li><code>xkbcli-compile-keymap</code>: Added option <code>--modmaps</code> that prints modifiers mappings. This is similar to the legacy <code>xmodmap -pm</code>.</li>
</ul>
<h2><a class="anchor" id="build-system"></a>
Build system</h2>
<h3><a class="anchor" id="breaking-changes-1"></a>
Breaking changes</h3>
<ul>
<li>Removed support for byacc &ndash; use bison instead. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/644">#644</a>)</li>
<li>Required bison ≥ 3.6.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-192--2025-05-07"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.9.2">1.9.2</a> – 2025-05-07</h1>
<h2><a class="anchor" id="api-3"></a>
API</h2>
<h3><a class="anchor" id="fixes-1"></a>
Fixes</h3>
<ul>
<li>Fixed empty compatibility interpretation statement not parsable by X11’s <code>xkbcomp</code>. This particularly affects Japanese layout <code>jp</code> when used with Xwayland. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/750">#750</a>)</li>
<li>Fixed empty compatibility interpretations map not parsable by X11’s <code>xkbcomp</code>.</li>
<li>Fixed key type map entries with a mix of bound and unbound modifiers not being ignored. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/758">#758</a>)</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-191--2025-05-02"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.9.1">1.9.1</a> – 2025-05-02</h1>
<h2><a class="anchor" id="api-4"></a>
API</h2>
<h3><a class="anchor" id="fixes-2"></a>
Fixes</h3>
<ul>
<li>X11: Fixed capitalization transformation not set properly, resulting in some keys (e.g. arrows, Home, etc.) not working when Caps Lock is on. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/740">#740</a>)</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-190--2025-04-26"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.9.0">1.9.0</a> – 2025-04-26</h1>
<h2><a class="anchor" id="api-5"></a>
API</h2>
<h3><a class="anchor" id="breaking-changes-2"></a>
Breaking changes</h3>
<ul>
<li><em>Merge modes</em> and <em>include mechanism</em> were completely refactored to fix inconsistencies. Included files are now always processed in isolation and do not propagate the local merge modes. This makes the reasoning about included files much easier and consistent.</li>
<li><p class="startli">Trailing <code>NoSymbol</code> and <code>NoAction()</code> are now dropped. This may affect keys that rely on an <em>implicit</em> key type.</p>
<p class="startli">Example:</p><ul>
<li>Input: <div class="fragment"><div class="line">key &lt;&gt; { [a, A, NoSymbol] };</div>
</div><!-- fragment --></li>
<li>Compilation with libxkbcommon &lt; 1.9.0: <div class="fragment"><div class="line">key &lt;&gt; {</div>
<div class="line">  type= <span class="stringliteral">&quot;FOUR_LEVEL_SEMIALPHABETIC&quot;</span>,</div>
<div class="line">  [a, A, NoSymbol, NoSymbol]</div>
<div class="line">};</div>
</div><!-- fragment --></li>
<li>Compilation with libxkbcommon ≥ 1.9.0: <code>c key &lt;&gt; { type= "ALPHABETIC", [a, A] }; </code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="new-2"></a>
New</h3>
<ul>
<li><p class="startli">Added function <code>xkb_components_names_from_rules()</code> to compute  <!-- -->
  <abbr title="Keycodes, Compatibility, Geometry, Symbols, Types">KcCGST</abbr>
  keymap components from
  <abbr title="Rules, Model, Layout, Variant, Options">RMLVO</abbr> names resolution.
  <!--! --></p>
<p class="startli">This mainly for <em>debugging</em> purposes and to enable the <code>--kccgst</code> option in the tools. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/669">#669</a>)</p>
</li>
<li>Added the following <em>wild cards</em> to the <b>rules</b> file syntax, in addition to the current <code>*</code> legacy wild card:<ul>
<li><code>&lt;none&gt;</code>: Match <em>empty</em> value.</li>
<li><code>&lt;some&gt;</code>: Match <em>non-empty</em> value.</li>
<li><code>&lt;any&gt;</code>: Match <em>any</em> (optionally empty) value. Its behavior does not depend on the context, contrary to the legacy wild card <code>*</code>.</li>
</ul>
</li>
<li>All keymap components are now optional, e.g. a keymap without a <code>xkb_types</code> section is now legal. The missing components will still be serialized explicitly in order to maintain backward compatibility.</li>
<li><p class="startli">Added support for further empty compound statements:</p><ul>
<li><code>xkb_types</code>: <code>type "xxx" {};</code></li>
<li><code>xkb_compat</code>: <code>interpret x {};</code> and <code>indicator "xxx" {};</code>.</li>
</ul>
<p class="startli">Such statements are initialized using the current defaults, i.e. the factory implicit defaults or some explicit custom defaults (e.g. <code>indicator.modifiers = Shift</code>).</p>
</li>
<li>Added support for actions and keysyms level list of length 0 and 1: respectively <code>{}</code> and <code>{a}</code>. Example: <code>key &lt;A&gt; { [{}, {a}, {a, A}] };</code>.</li>
<li>Enable using the merge mode <em>replace</em> in include statements using the prefix <code>^</code>, such as: <code>include "a^b"</code>. The main motivation is to enable this new syntax in <em>rules</em>, which previously could not handle this merge mode.</li>
<li>Added support for sequences of actions in <code>interpret</code> statements of the <code>xkb_compat</code> component, mirroring the syntax used in <code>xkb_symbols</code>. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/695">#695</a>)</li>
<li>Added support for keysym Capitalization transformation to <code>xkb_state_key_get_syms()</code>. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/552">#552</a>)</li>
<li><code>xkb_utf32_to_keysym</code>: Allow <a href="https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Noncharacters">Unicode noncharacters</a>. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/715">#715</a>)</li>
<li><p class="startli"><code><a class="el" href="group__keysyms.html#gadf335e065050f306ff9094aefa6c9736" title="Get a keysym from its name.">xkb_keysym_from_name()</a></code>:</p><ul>
<li>Unicode format <code>UNNNN</code>: allow control characters C0 and C1 and use <code><a class="el" href="group__keysyms.html#ga5fde9cc397ae996b4efac56c9cd6bd18" title="Get the keysym corresponding to a Unicode/UTF-32 codepoint.">xkb_utf32_to_keysym()</a></code> for the conversion when <code>NNNN &lt; 0x100</code>, for backward compatibility.</li>
<li>Numeric hexadecimal format <code>0xNNNN</code>: <em>unchanged</em>. Contrary to the Unicode format, it does not normalize any keysym values in order to enable roundtrip with <code><a class="el" href="group__keysyms.html#ga2a06b575bfc0fef9655bb7f860737965" title="Get the name of a keysym.">xkb_keysym_get_name()</a></code>.</li>
</ul>
<p class="startli">(<a href="https://github.com/xkbcommon/libxkbcommon/issues/715">#715</a>)</p>
</li>
<li>Added <a href="https://en.wikipedia.org/wiki/Unicode#Codespace_and_code_points">Unicode code point</a> escape sequences <code>\u{NNNN}</code>. They are replaced with the <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoding of their corresponding code point <code>U+NNNN</code>, if legal. Supported Unicode code points are in the range <code>1‥0x10ffff</code>. This is intended mainly for writing keysyms as <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoded strings.</li>
<li>Enable to write keysyms as UTF-8-encoded strings:<ul>
<li><em>Single</em> Unicode code point <code>U+1F3BA</code> (TRUMPET) <code>"🎺"</code> is converted into a single keysym: <code>U1F3BA</code>.</li>
<li><em>Multiple</em> Unicode code points are converted to a keysym <em>list</em> where it is allowed (i.e. in key symbols). E.g. <code>"J́"</code> is converted to U+004A LATIN CAPITAL LETTER J plus U+0301 COMBINING ACUTE ACCENT: <code>{J, U0301}</code>.</li>
<li>An empty string <code>""</code> denotes the keysym <code>NoSymbol</code>.</li>
</ul>
</li>
<li>Enable displaying bidirectional text in XKB files using the following Unicode code points, wherever a white space can be used:<ul>
<li><code>U+200E</code> LEFT-TO-RIGHT MARK</li>
<li><code>U+200F</code> RIGHT-TO-LEFT MARK</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="fixes-3"></a>
Fixes</h3>
<ul>
<li>Added support for <code>libxml2-2.14+</code>, which now disallows parsing trailing <code>NULL</code> bytes. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/692">#692</a>)</li>
<li><p class="startli">Fixed included <em>default</em> section not resolving to an <em>exact</em> match in some cases. It may occur if one creates a file name in a <em>user</em> XKB directory that also exists in the XKB <em>system</em> directory.</p>
<p class="startli">Example: if one creates a custom variant <code>my_variant</code> in the file <code>$XDG_CONFIG_HOME/xkb/symbols/us</code>, then <em>before</em> libxkbcommon 1.9.0 every statement loading the <em>default</em> map of the <code>us</code> file, <code>include "us"</code>, would wrongly resolve including <code>us(my_variant)</code> from the <em>user</em> configuration directory instead of <code>us(basic)</code> from the XKB <em>system</em> directory. Starting from libxkbcommon 1.9.0, <code>include "us"</code> would correctly resolve to the system file, unless <code>$XDG_CONFIG_HOME/xkb/symbols/us</code> contains an <em>explicit default</em> section. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/726">#726</a>)</p>
</li>
<li><p class="startli">Fixed floating-point number parsing failling on locales that use a decimal separator different than the period <code>.</code>.</p>
<p class="startli">Note that the issue is unlikely to happen even with such locales, unless <em>parsing</em> a keymap with a <em>geometry</em> component which contains floating-point numbers.</p>
<p class="startli">Affected API:</p><ul>
<li><code>xkb_keymap_new_from_file()</code>,</li>
<li><code>xkb_keymap_new_from_buffer()</code>,</li>
<li><code>xkb_keymap_new_from_string()</code>.</li>
</ul>
<p class="startli">Unaffected API:</p><ul>
<li><code>xkb_keymap_new_from_names()</code>: none of the components loaded use floating-point number. libxkbcommon does not load <em>geometry</em> files.</li>
<li><code>libxkbcommon-x11</code>: no such parsing is involved.</li>
</ul>
</li>
<li><p class="startli">Fixed the handling of empty keys. Previously keys with no symbols nor actions would simply be skipped entirely. E.g. in the following:</p>
<div class="fragment"><div class="line">key &lt;A&gt; { vmods = M };</div>
<div class="line">modifier_map Shift { &lt;A&gt; };</div>
</div><!-- fragment --><p class="startli">the key <code>&lt;A&gt;</code> would be skipped and the virtual modifier <code>M</code> would not be mapped to <code>Shift</code>. This is now handled properly.</p>
</li>
<li>Fixed characters not escaped properly in the keymap serialization, resulting in a keymap string with erroneous string literals and possible syntax errors.</li>
<li>Fixed octal escape sequences valid in Xorg’s xkbcomp but not in xkbcommon. Now up to <em>4</em> digits are parsed, compared to <em>3</em> previously.</li>
<li>Fixed the serialization of the <code>whichGroupState</code> indicator field.</li>
</ul>
<h2><a class="anchor" id="tools-2"></a>
Tools</h2>
<h3><a class="anchor" id="new-3"></a>
New</h3>
<ul>
<li><p class="startli"><code>xkbcli compile-keymap</code>: Added <code>--kccgst</code> option to display the result of  <!-- -->
  <abbr title="Rules, Model, Layout, Variant, Options">RMLVO</abbr>
  names resolution to
  <abbr title="Keycodes, Compatibility, Geometry, Symbols, Types">KcCGST</abbr>
  components.
  <!--! --></p>
<p class="startli">This option has the same function than <code>setxkbmap -print</code>. This is particularly useful for debugging issues with the rules. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/669">#669</a>)</p>
</li>
<li>Honor user locale in all tools.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-181--2025-03-12"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.8.1">1.8.1</a> – 2025-03-12</h1>
<h2><a class="anchor" id="api-6"></a>
API</h2>
<h3><a class="anchor" id="fixes-4"></a>
Fixes</h3>
<ul>
<li><p class="startli">Fixed segfault due to invalid arithmetic to bring <em>negative</em> layout indexes into range. It triggers with the following settings:</p><ul>
<li>layouts count (per key or total) N: <code>N &gt; 0</code>, and</li>
<li>layout index n: <code>n = - k * N</code> (<code>k &gt; 0</code>)</li>
</ul>
<p class="startli">Note that these settings are unlikely in usual use cases.</p>
</li>
</ul>
<h2><a class="anchor" id="tools-3"></a>
Tools</h2>
<h3><a class="anchor" id="breaking-changes-3"></a>
Breaking changes</h3>
<ul>
<li>The tools do not load the <em>default</em> RMLVO (rules, model, layout, variant, options) values from the environment anymore. The previous behavior may be restored by using the new <code>--enable-environment-names</code> option.</li>
</ul>
<h2><a class="anchor" id="build-system-1"></a>
Build system</h2>
<h3><a class="anchor" id="new-4"></a>
New</h3>
<ul>
<li>Source files are now annotated with SPDX short license identifiers. The LICENSE file was updated to accommodate this. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/628">#628</a>)</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-180--2025-02-04"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.8.0">1.8.0</a> – 2025-02-04</h1>
<h2><a class="anchor" id="api-7"></a>
API</h2>
<h3><a class="anchor" id="breaking-changes-4"></a>
Breaking changes</h3>
<ul>
<li><p class="startli"><code>NoSymbol</code> is now systematically dropped in multi-keysyms levels:</p>
<div class="fragment"><div class="line"><span class="comment">// Before normalization</span></div>
<div class="line">key &lt;&gt; { [{NoSymbol}, {a, NoSymbol}, {NoSymbol,b}, {a, NoSymbol, b}] };</div>
<div class="line"><span class="comment">// After normalization</span></div>
<div class="line">key &lt;&gt; { [NoSymbol, a, b, {a, b}] };</div>
</div><!-- fragment --></li>
<li>Added the upper case mapping ß → ẞ (<code>ssharp</code> → <code>U1E9E</code>). This enable to type ẞ using CapsLock thanks to the internal capitalization rules.</li>
<li><p class="startli">Updated keysyms case mappings to cover full <b>[Unicode 16.0]</b>. This change provides a <em>consistent behavior</em> with respect to case mappings, and affects the following:</p><ul>
<li><p class="startli"><code><a class="el" href="group__keysyms.html#gaf888d4d0f209222fe9c0b7b324fd90ca" title="Convert a keysym to its lowercase form.">xkb_keysym_to_lower()</a></code> and <code><a class="el" href="group__keysyms.html#ga616148547139853f6f413c9c0720780d" title="Convert a keysym to its uppercase form.">xkb_keysym_to_upper()</a></code> give different output for keysyms not covered previously and handle <em>title</em>-cased keysyms.</p>
<p class="startli">Example of title-cased keysym: <code>U01F2</code> “ǲ”:</p><ul>
<li><code>xkb_keysym_to_lower(U01F2) == U01F3</code> “ǲ” → “ǳ”</li>
<li><code>xkb_keysym_to_upper(U01F2) == U01F1</code> “ǲ” → “Ǳ”</li>
</ul>
</li>
<li><em>Implicit</em> alphabetic key types are better detected, because they use the latest Unicode case mappings and now handle the <em>title</em>-cased keysyms the same way as upper-case ones.</li>
</ul>
<p class="startli">Note: There is a single <em>exception</em> that do not follow the Unicode mappings:</p><ul>
<li><code>xkb_keysym_to_upper(ssharp) == U1E9E</code> “ß” → “ẞ”</li>
</ul>
<p class="startli">Note: As before, only <em>simple</em> case mappings (i.e. one-to-one) are supported. For example, the full upper case of <code>U+01F0</code> “ǰ” is “J̌” (2 characters: <code>U+004A</code> and <code>U+030C</code>), which would require 2 keysyms, which is not supported by the current API.</p>
</li>
</ul>
<h3><a class="anchor" id="new-5"></a>
New</h3>
<ul>
<li>Implemented the <code>GroupLatch</code> action, usually activated with the keysym <code>ISO_Group_Latch</code>. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/455">#455</a>)</li>
<li><p class="startli">Symbols: Added support for <em>multiple actions per levels:</em></p><ul>
<li>When no action is specified, <code>interpret</code> statements are used to find an action corresponding to <em>each</em> keysym, as expected.</li>
<li>When both keysyms and actions are specified, they may have a different count for each level.</li>
<li><p class="startli">For now, at most one action of each of the following categories is allowed per level:</p><ul>
<li>modifier actions: <code>SetMods</code>, <code>LatchMods</code>, <code>LockMods</code>;</li>
<li>group actions: <code>SetGroup</code>, <code>LatchGroup</code>, <code>LockGroup</code>.</li>
</ul>
<p class="startli">Some examples:</p><ul>
<li><code>SetMods</code> + <code>SetGroup</code>: ok</li>
<li><code>SetMods</code> + <code>SetMods</code>: error</li>
<li><code>SetMods</code> + <code>LockMods</code>: error</li>
<li><code>SetMods</code> + <code>LockGroup</code>: ok</li>
</ul>
</li>
</ul>
<p class="startli">(<a href="https://github.com/xkbcommon/libxkbcommon/issues/486">#486</a>)</p>
</li>
<li><p class="startli">Updated keysyms using latest <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto">xorgproto</a> (commit: <code>d7ea44d5f04cc476dee83ef439a847172f7a6bd1</code>):</p>
<p class="startli">Additions:</p><ul>
<li><code>XKB_KEY_XF86RefreshRateToggle</code></li>
<li><code>XKB_KEY_XF86Accessibility</code></li>
<li><code>XKB_KEY_XF86DoNotDisturb</code></li>
</ul>
<p class="startli">Relevant upstream merge request: <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/91">xorgproto-91</a>.</p>
</li>
<li><p class="startli">Added deprecated keysym warnings:</p><ul>
<li><em>name</em> deprecation (typo, historical alias), reporting the reference name;</li>
<li><em>keysym</em> deprecation (ambiguous meaning, all names deprecated).</li>
</ul>
<p class="startli">These warnings are activated by setting the log verbosity to at least 2.</p>
<p class="startli">It is advised to fix these warnings, as the deprecated items may be removed in a future release.</p>
</li>
<li><code><a class="el" href="xkbcommon-names_8h.html" title="Predefined names for common modifiers and LEDs.">xkbcommon-names.h</a></code>: Added the following modifiers names definitions:<ul>
<li><code>XKB_MOD_NAME_MOD1</code></li>
<li><code>XKB_MOD_NAME_MOD2</code></li>
<li><code>XKB_MOD_NAME_MOD3</code></li>
<li><code>XKB_MOD_NAME_MOD4</code></li>
<li><code>XKB_MOD_NAME_MOD5</code></li>
<li><code>XKB_VMOD_NAME_ALT</code></li>
<li><code>XKB_VMOD_NAME_META</code></li>
<li><code>XKB_VMOD_NAME_NUM</code></li>
<li><code>XKB_VMOD_NAME_SUPER</code></li>
<li><code>XKB_VMOD_NAME_HYPER</code></li>
<li><code>XKB_VMOD_NAME_LEVEL3</code></li>
<li><code>XKB_VMOD_NAME_LEVEL5</code></li>
<li><code>XKB_VMOD_NAME_SCROLL</code></li>
</ul>
</li>
<li><p class="startli"><code><a class="el" href="xkbcommon-names_8h.html" title="Predefined names for common modifiers and LEDs.">xkbcommon-names.h</a></code>: Added <code>XKB_LED_NAME_COMPOSE</code> and <code>XKB_LED_NAME_KANA</code> definitions to cover all LEDs defined in <a href="https://usb.org/sites/default/files/hid1_11.pdf">USB HID</a>.</p>
<p class="startli">Contributed by Martin Rys</p>
</li>
<li>Rules: Use XKB paths to resolve relative paths in include statements. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/501">#501</a>)</li>
<li><p class="startli">Rules: Added support for special layouts indexes:</p><ul>
<li><em>single</em>: matches a single layout; <code>layout[single]</code> is the same as without explicit index: <code>layout</code>.</li>
<li><em>first</em>: matches the first layout/variant, no matter how many layouts are in the RMLVO configuration. Acts as both <code>layout</code> and <code>layout[1]</code>.</li>
<li><em>later</em>: matches all but the first layout. This is an index range. Acts as <code>layout[2]</code> .. <code>layout[MAX_LAYOUT]</code>, where <code>MAX_LAYOUT</code> is currently 4.</li>
<li><em>any</em>: matches layout at any position. This is an index range.</li>
</ul>
<p class="startli">Also added:</p><ul>
<li>the special index <code>i</code> which correspond to the index of the matched layout.</li>
<li>the <code>:all</code> qualifier: it applies the qualified item to all layouts.</li>
</ul>
<p class="startli">See the <a href="https://xkbcommon.org/doc/current/rule-file-format.html">documentation</a> for further information.</p>
</li>
</ul>
<h3><a class="anchor" id="fixes-5"></a>
Fixes</h3>
<ul>
<li><p class="startli">Previously, setting <em>explicit actions</em> for a group in symbols files made the parser skip compatibility interpretations for <em>all</em> groups in the corresponding key, resulting in possibly broken groups with <em>no</em> explicit actions or missing key fields.</p>
<p class="startli">Fixed by skipping interpretations only for groups with explicit actions when parsing a keymap and setting relevant fields explicitly when serializing a keymap to a string. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/511">#511</a>)</p>
</li>
<li><p class="startli"><code>xkb_keymap_new_from_names()</code>: Allow only one group per key in symbols sections. While the original issue was <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/-/merge_requests/253">fixed in <code>xkeyboard-config</code></a> project, the previous handling in <code>libxkbcommon</code> of extra key groups was deemed unintuitive.</p>
<p class="startli">Note: rules resolution may still produce more groups than the input layouts. This is currently true for some <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/-/blob/6a2eb9e63bcb3c52584580570d31cd91110d1f2e/rules/0013-modellayout_symbols.part#L2">legacy rules in <code>xkeyboard-config</code></a>.</p>
<p class="startli">(<a href="https://github.com/xkbcommon/libxkbcommon/issues/262">#262</a>)</p>
</li>
<li>Fixed <code>xkb_keymap_get_as_string</code> truncating the <em>4</em> longest keysyms names, such as <code>Greek_upsilonaccentdieresis</code>.</li>
<li><code>xkb_keysym_to_utf8</code>: Require only 5 bytes for the buffer, as UTF-8 encodes code points on up to 4 bytes + 1 byte for the NULL-terminating byte. Previous standard <a href="https://datatracker.ietf.org/doc/html/rfc2279">RFC 2279</a> (1998) required up to 6 bytes per code point, but has been superseded by <a href="https://datatracker.ietf.org/doc/html/rfc3629">RFC 3629</a> (2003). (<a href="https://github.com/xkbcommon/libxkbcommon/issues/418">#418</a>)</li>
<li><p class="startli">Registry: Fixed <code>libxml2</code> global error handler not reset after parsing, which could trigger a crash if the corresponding <code><a class="el" href="structrxkb__context.html" title="Opaque top level library context object.">rxkb_context</a></code> has been freed.</p>
<p class="startli">Contributed by Sebastian Keller. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/529">#529</a>)</p>
</li>
<li><p class="startli">Rules: Fix handling of wild card <code>*</code> to match the behavior of <code>libxkbfile</code>. Previously <code>*</code> would match any value, even empty one. Now:</p><ul>
<li>For <code>model</code> and <code>options</code>: <em>always</em> match.</li>
<li>For <code>layout</code> and <code>variant</code>: match any <em>non-empty</em> value.</li>
</ul>
<p class="startli">(<a href="https://github.com/xkbcommon/libxkbcommon/issues/497">#497</a>)</p>
</li>
<li>Fixed <code>LatchGroup</code> action with the <code>latchToLock</code> option disabled not applying its latch effect multiple times. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/577">#577</a>)</li>
<li>Fixed incorrect handling of group indicators when <code>whichGroupState</code> is set with <code>Base</code> or <code>Latched</code>. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/579">#579</a>)</li>
<li>Fixed missing explicit virtual modifier mappings when export the keymap as a string.</li>
<li>Fixed the lower case mapping ẞ → ß (<code>U1E9E</code> → <code>ssharp</code>). This re-enable the detection of alphabetic key types for the pair (ß, ẞ).</li>
<li>Fixed modifiers not properly unset when multiple latches are used simultaneously. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/583">#583</a>)</li>
<li><p class="startli">The following functions now allow to query also <em>virtual</em> modifiers, so they work with <em>any</em> modifiers (real <em>and</em> virtual):</p><ul>
<li><code>xkb_state_mod_index_is_active()</code></li>
<li><code>xkb_state_mod_indices_are_active()</code></li>
<li><code>xkb_state_mod_name_is_active()</code></li>
<li><code>xkb_state_mod_names_are_active()</code></li>
<li><code>xkb_state_mod_index_is_consumed()</code></li>
<li><code>xkb_state_mod_index_is_consumed2()</code></li>
<li><code>xkb_state_mod_mask_remove_consumed()</code></li>
</ul>
<p class="startli">Warning: they may overmatch in case there are overlappings virtual-to-real modifiers mappings.</p>
</li>
<li>X11: Do not drop a level when the keysym is undefined but not the action.</li>
</ul>
<h2><a class="anchor" id="tools-4"></a>
Tools</h2>
<h3><a class="anchor" id="new-6"></a>
New</h3>
<ul>
<li>Added <code>xkbcli dump-keymap-wayland</code> and <code>xkbcli dump-keymap-x11</code> debugging tools to dump a keymap from a Wayland compositor or a X server, similar to what <code>xkbcomp -xkb $DISPLAY -</code> does for X servers.</li>
<li><code>xkbcli compile-compose</code>: the Compose file may be passed as a positional argument and <code>--file</code> is now deprecated. The file can also be piped to the standard input by setting the path to <code>-</code>.</li>
<li><code>xkbcli compile-keymap</code>: Added <code>--keymap</code> as a more intuitive alias for <code>--from-xkb</code>. Both now accept an optional keymap file argument. These flags may be omitted; in this case the keymap file may be passed as a positional argument.</li>
<li>Added <code>--test</code> option to <code>compile-keymap</code> and <code>compile-compose</code>, to enable testing compilation without printing the resulting file.</li>
<li><p class="startli"><code>xkbcli how-to-type</code>: added new input formats and their corresponding documentation.</p>
<p class="startli"><em>Unicode code points</em> can be passed in the following formats:</p><ul>
<li>Literal character (requires UTF-8 character encoding of the terminal);</li>
<li>Decimal number;</li>
<li>Hexadecimal number: either <code>0xNNNN</code> or <code>U+NNNN</code>.</li>
</ul>
<p class="startli"><em>Keysyms</em> can to be passed in the following formats:</p><ul>
<li>Decimal number;</li>
<li>Hexadecimal number: <code>0xNNNN</code>;</li>
<li>Name.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="fixes-6"></a>
Fixes</h3>
<ul>
<li>Fixed various tools truncating the <em>4</em> longest keysyms names, such as <code>Greek_upsilonaccentdieresis</code>.</li>
<li><code>xkbcli list</code>: Fix duplicate variants. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/587">#587</a>)</li>
</ul>
<h2><a class="anchor" id="build-system-2"></a>
Build system</h2>
<h3><a class="anchor" id="breaking-changes-5"></a>
Breaking changes</h3>
<ul>
<li>Raised minimal meson version requirement to 0.58.</li>
</ul>
<h3><a class="anchor" id="fixes-7"></a>
Fixes</h3>
<ul>
<li>Make the test of <code>-Wl,--version-script</code> more robust. (<a href="https://github.com/xkbcommon/libxkbcommon/issues/481">#481</a>)</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-170--2024-03-24"></a>
libxkbcommon <a href="https://github.com/xkbcommon/libxkbcommon/tree/xkbcommon-1.7.0">1.7.0</a> – 2024-03-24</h1>
<h2><a class="anchor" id="api-8"></a>
API</h2>
<h3><a class="anchor" id="new-7"></a>
New</h3>
<ul>
<li>Added early detection of invalid encodings and BOM for keymaps, rules &amp; Compose. Also added a hint that the expected encoding must be UTF-8 compatible.</li>
</ul>
<h3><a class="anchor" id="fixes-8"></a>
Fixes</h3>
<ul>
<li><p class="startli">Updated keysyms using latest <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto">xorgproto</a> (commit: <code>cd33097fc779f280925c6d6bbfbd5150f93ca5bc</code>):</p>
<p class="startli">For the sake of compatibility, this reintroduces some deleted keysyms and postpones the effective deprecation of others, that landed in xkbcommon 1.6.0.</p><ul>
<li>Additions (reverted removal):<ul>
<li><code>XKB_KEY_dead_lowline</code></li>
<li><code>XKB_KEY_dead_aboveverticalline</code></li>
<li><code>XKB_KEY_dead_belowverticalline</code></li>
<li><code>XKB_KEY_dead_longsolidusoverlay</code></li>
</ul>
</li>
<li>The following keysyms names remain deprecated, but are set again (i.e. as before xkbcommon 1.6.0) as the reference names for their respective keysyms, in order to ensure the transition to the newer names that replace them. This affects functions such as <code>xkb_keymap_key_get_name</code> and <code>xkb_keymap_get_as_string</code>.<ul>
<li><code>XKB_KEY_masculine</code>: is deprecated in favor of <code>XKB_KEY_ordmasculine</code></li>
<li><code>XKB_KEY_guillemotleft</code>: is deprecated in favor of <code>XKB_KEY_guillemetleft</code></li>
<li><code>XKB_KEY_guillemotright</code>: is deprecated in favor of <code>XKB_KEY_guillemetright</code></li>
<li><code>XKB_KEY_dead_small_schwa</code>: is deprecated in favor of <code>XKB_KEY_dead_schwa</code></li>
<li><code>XKB_KEY_dead_capital_schwa</code>: is deprecated in favor of <code>XKB_KEY_dead_SCHWA</code></li>
</ul>
</li>
</ul>
<p class="startli">Relevant upstream merge requests: <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/83">xorgproto-83</a>, <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/84">xorgproto-84</a>.</p>
</li>
<li>Keysyms: Fixed inconsistent results in <code>xkb_keysym_from_name</code> when used with the flag <code>XKB_KEYSYM_CASE_INSENSITIVE</code>. In some rare cases it would return a keysym with an upper-case name instead of the expected lower-case (e.g. <code>XKB_KEY_dead_A</code> instead of <code>XKB_KEY_dead_a</code>).</li>
<li>Keysyms: Fixed case mapping for 3 Latin 1 keysyms:<ul>
<li><code>XKB_KEY_ydiaeresis</code></li>
<li><code>XKB_KEY_mu</code></li>
<li><code>XKB_KEY_ssharp</code></li>
</ul>
</li>
<li>Keysyms: Fixed <code>xkb_keysym_is_modifier</code> to detect also the following keysyms:<ul>
<li><code>XKB_KEY_ISO_Level5_Shift</code></li>
<li><code>XKB_KEY_ISO_Level5_Latch</code></li>
<li><code>XKB_KEY_ISO_Level5_Lock</code></li>
</ul>
</li>
<li>Prevent recursive includes of keymap components.</li>
<li><p class="startli">Fixed global default statements <code>x.y = z;</code> in wrong scope not raising an error.</p>
<p class="startli">Contributed by Mikhail Gusarov</p>
</li>
<li><p class="startli">Keymap: Fixed empty symbols declaration.</p>
<p class="startli">Contributed by Yuichiro Hanada.</p>
</li>
<li><p class="startli">Rules: Made newline required after <code>!include</code> line.</p>
<p class="startli">Contributed by Mikhail Gusarov.</p>
</li>
<li><p class="startli">Rules: Fixed a bug where variant indexes were ignored with the layout index used instead. They are practically always the same, but don’t have to be.</p>
<p class="startli">Contributed by @wysiwys.</p>
</li>
<li>Compose: Fixed a segfault with <code>xkb_compose_table_iterator_next</code> when used on an empty table.</li>
<li>Compose: Added check to ensure to open only regular files, not e.g. directories.</li>
<li>Registry: Updated the DTD and always parse the “popularity” attribute.</li>
<li>Fixed a few memory leaks and keymap symbols parsing.</li>
</ul>
<h2><a class="anchor" id="tools-5"></a>
Tools</h2>
<h3><a class="anchor" id="new-8"></a>
New</h3>
<ul>
<li><code>xkbcli compile-compose</code>: added new CLI utility to test Compose files.</li>
<li><code>xkbcli interactive-evdev</code>: added <code>--verbose</code> option.</li>
<li><code>xkbcli interactive-x11</code>: added support for Compose.</li>
<li><code>xkbcli interactive-wayland</code>: added support for Compose.</li>
</ul>
<h3><a class="anchor" id="fixes-9"></a>
Fixes</h3>
<ul>
<li>Bash completion: Fixed completion in some corner cases.</li>
</ul>
<h2><a class="anchor" id="build-system-3"></a>
Build system</h2>
<ul>
<li><p class="startli">Fix building with clang when using <code>-Wl,--gc-sections</code>.</p>
<p class="startli">Contributed by ppw0.</p>
</li>
<li><p class="startli">Fixed linking using <code>lld 1.17</code>.</p>
<p class="startli">Contributed by Baptiste Daroussin.</p>
</li>
<li>Fix building X11 tests on macOS.</li>
<li>Documentation is no longer built by default; it requires <code>-Denable-docs=true</code>.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-160--2023-10-08"></a>
libxkbcommon 1.6.0 – 2023-10-08</h1>
<h2><a class="anchor" id="api-9"></a>
API</h2>
<h3><a class="anchor" id="breaking-changes-6"></a>
Breaking changes</h3>
<ul>
<li><p class="startli"><em>Remove</em> keysyms that were intended for German T3 layout but are unused:</p><ul>
<li><code>XKB_KEY_dead_lowline</code></li>
<li><code>XKB_KEY_dead_aboveverticalline</code></li>
<li><code>XKB_KEY_dead_belowverticalline</code></li>
<li><code>XKB_KEY_dead_longsolidusoverlay</code></li>
</ul>
<p class="startli">See the upstream <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/70"><code>xorgproto</code> MR</a>. See hereinafter for further changes related to keysyms.</p>
</li>
</ul>
<h3><a class="anchor" id="new-9"></a>
New</h3>
<ul>
<li>Add Compose iterator API to iterate the entries in a compose table:<ul>
<li><code>xkb_compose_table_entry_sequence()</code></li>
<li><code>xkb_compose_table_entry_keysym()</code></li>
<li><code>xkb_compose_table_entry_utf8()</code></li>
<li><code>xkb_compose_table_iterator_new()</code></li>
<li><code>xkb_compose_table_iterator_free()</code></li>
<li><code>xkb_compose_table_iterator_next()</code></li>
</ul>
</li>
<li><em>Structured log messages</em> with a message registry. There is an <em>ongoing</em> work to assign unique identifiers to log messages and add a corresponding error index documentation page:<ul>
<li>The log entries are preceded with an identifier in the form <code>XKB-NNN</code>, where <code>NNN</code> is a decimal number.</li>
<li>The log entries can then be parsed with third-party tools, to check for specific identifiers.</li>
<li>The new documentation page “**Error index**” lists all the kind of error messages with their identifiers. The aim is that each entry could present detailed information on the error and how to fix it.</li>
</ul>
</li>
<li>Add a new warning for numeric keysyms references in XKB files: the preferred keysym reference form is its name or its Unicode value, if relevant.</li>
<li>Add the upper bound <code>XKB_KEYSYM_MAX</code> to check valid keysyms.</li>
<li>Add a warning when loading a keymap using RMLVO with no layout but with the variant set. The variant is actually discarded and both layout and variant are set to default values, but this was done previously with no warning, confusing end users.</li>
<li>Add support for <code>modifier_map None { … }</code>. This feature is missing compared to the X11 implementation. It allows to reset the modifier map of a key.</li>
<li>Update keysyms using latest <a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto">xorgproto</a> (commit: <code>1c8128d72df22843a2022576850bc5ab5e3a46ea</code>):<ul>
<li>Additions:<ul>
<li><code>XKB_KEY_ordmasculine</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_guillemetleft</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_guillemetright</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_dead_schwa</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/78">xorgproto-78</a>)</li>
<li><code>XKB_KEY_dead_SCHWA</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/78">xorgproto-78</a>)</li>
<li><code>XKB_KEY_dead_hamza</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/71">xorgproto-71</a>)</li>
<li><code>XKB_KEY_XF86EmojiPicker</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/44">xorgproto-44</a>)</li>
<li><code>XKB_KEY_XF86Dictate</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/49">xorgproto-49</a>)</li>
<li><code>XKB_KEY_XF86CameraAccessEnable</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86CameraAccessDisable</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86CameraAccessToggle</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86NextElement</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86PreviousElement</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86AutopilotEngageToggle</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86MarkWaypoint</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86Sos</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86NavChart</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86FishingChart</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86SingleRangeRadar</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86DualRangeRadar</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86RadarOverlay</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86TraditionalSonar</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86ClearvuSonar</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86SidevuSonar</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
<li><code>XKB_KEY_XF86NavInfo</code> (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/82">xorgproto-82</a>)</li>
</ul>
</li>
<li>Deprecations:<ul>
<li><code>XKB_KEY_masculine</code>: use <code>XKB_KEY_ordmasculine</code> instead (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_guillemotleft</code>: use <code>XKB_KEY_guillemetleft</code> instead (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_guillemotright</code>: use <code>XKB_KEY_guillemetright</code> instead (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/68">xorgproto-68</a>)</li>
<li><code>XKB_KEY_dead_small_schwa</code>: use <code>XKB_KEY_dead_schwa</code> instead (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/78">xorgproto-78</a>)</li>
<li><code>XKB_KEY_dead_capital_schwa</code>: use <code>XKB_KEY_dead_SCHWA</code> instead (<a href="https://gitlab.freedesktop.org/xorg/proto/xorgproto/-/merge_requests/78">xorgproto-78</a>)</li>
</ul>
</li>
</ul>
</li>
<li>Ongoing work to improve the documentation about XKB and its V1 format.</li>
</ul>
<h3><a class="anchor" id="fixes-10"></a>
Fixes</h3>
<ul>
<li>Prevent <code>xkb_keysym_from_name</code> to parse out-of-range hexadecimal keysyms.</li>
<li>Disallow producing NULL character with escape sequences <code>\0</code> and <code>\x0</code>.</li>
<li>Prevent overflow of octal escape sequences by making <code>\400..\777</code> invalid.</li>
<li>Prevent interpreting and emitting invalid Unicode encoding forms: surrogates are invalid in both UTF-32 and UTF-8.</li>
<li><code>xkb_keymap_new_from_buffer</code>: Allow for a NULL-terminated keymap string.</li>
<li><p class="startli">Compose: Increase the limit of possible entries to handle huge Compose files.</p>
<p class="startli">Contributed by alois31.</p>
</li>
</ul>
<h2><a class="anchor" id="tools-6"></a>
Tools</h2>
<h3><a class="anchor" id="new-10"></a>
New</h3>
<ul>
<li>Add bash completions for <code>xkbcli</code> and its subcommands.</li>
<li><code>xkbcli interactive-*</code>: Add options <code>--short</code> to hide some fields.</li>
<li><code>xkbcli interactive-evdev</code>: Add <code>--includes</code> and <code>--include-defaults</code> options.</li>
<li>Add <code>xkb-check-messages</code> <em>experimental</em> tool (not installed). It checks whether given log messages identifiers are supported.</li>
</ul>
<h3><a class="anchor" id="fixes-11"></a>
Fixes</h3>
<ul>
<li><code>xkbcli compile-keymap</code>: Allow to use without arguments.</li>
<li><code>xkbcli interactive-*</code>: Always print keycode.</li>
<li><code>xkbcli interactive-*</code>: Escape control characters for Unicode output, instead of printing them as-is, messing the output.</li>
</ul>
<h2><a class="anchor" id="build-system-4"></a>
Build system</h2>
<ul>
<li>Bump required meson to 0.52.0.</li>
<li><p class="startli">Allow <code>xkbcommon</code> to be used as a subproject.</p>
<p class="startli">Contributed by Simon Ser.</p>
</li>
<li>Improve Windows compilation.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-150--2023-01-02"></a>
libxkbcommon 1.5.0 – 2023-01-02</h1>
<ul>
<li><p class="startli">Add <code><a class="el" href="structxkb__context.html" title="Opaque top level library context object.">xkb_context</a></code> flag <code>XKB_CONTEXT_NO_SECURE_GETENV</code> and <code><a class="el" href="structrxkb__context.html" title="Opaque top level library context object.">rxkb_context</a></code> flag <code>RXKB_CONTEXT_NO_SECURE_GETENV</code>.</p>
<p class="startli">xkbcommon uses <code>getenv_secure()</code> to obtain environment variables. This flag makes xkbcommon use <code>getenv()</code> instead.</p>
<p class="startli">This is useful for some clients that have relatively benign capabilities set, like <code>CAP_SYS_NICE</code>, that also want to use e.g. the XKB configuration from the environment and user configs in <code>$XDG_CONFIG_HOME</code>.</p>
<p class="startli">Contributed by Ronan Pigott.</p>
</li>
<li><p class="startli">Fix crash in <code>xkbcli interactive-wayland</code> under a compositor which supports new versions of the xdg-shell protocol.</p>
<p class="startli">Contributed by Jan Alexander Steffens (heftig).</p>
</li>
<li>Fix some MSVC build issues.</li>
<li>Fix some issues when including xkbcommon as a meson subproject.</li>
<li>meson&gt;=0.51 is now required.</li>
<li>New API: <code>XKB_CONTEXT_NO_SECURE_GETENV</code> <code>RXKB_CONTEXT_NO_SECURE_GETENV</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-141--2022-05-21"></a>
libxkbcommon 1.4.1 – 2022-05-21</h1>
<ul>
<li><p class="startli">Fix compose sequence overriding (common prefix) not working correctly. Regressed in 1.2.0.</p>
<p class="startli">Contributed by Weng Xuetian.</p>
</li>
<li><p class="startli">Remove various bogus currency sign (particulary Euro and Korean Won) entries from the keysym ↔ Unicode mappings. They prevented the real keysyms/codepoints for these from mapping correctly.</p>
<p class="startli">Contributed by Sam Lantinga and Simon Ser.</p>
</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-140--2022-02-04"></a>
libxkbcommon 1.4.0 – 2022-02-04</h1>
<ul>
<li><p class="startli">Add <code>enable-tools</code> option to Meson build (on by default) to allow disabling the <code>xkbcli</code> tools.</p>
<p class="startli">Contributed by Alex Xu (Hello71).</p>
</li>
<li><p class="startli">In <code>xkbcli list</code>, fix “YAML Norway problem” in output.</p>
<p class="startli">Contributed by Peter Hutterer.</p>
</li>
<li><p class="startli">In libxkbregistry, variants now inherit iso639, iso3166 and brief from parent layout if omitted.</p>
<p class="startli">Contributed by M Hickford.</p>
</li>
<li><p class="startli">In libxkbregistry, don’t call <code>xmlCleanupParser()</code> - it’s not supposed to be called by libraries.</p>
<p class="startli">Contributed by Peter Hutterer.</p>
</li>
<li><p class="startli">In libxkbregistry, skip over invalid ISO-639 or ISO-3166 entries.</p>
<p class="startli">Contributed by Peter Hutterer.</p>
</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-131--2021-09-10"></a>
libxkbcommon 1.3.1 – 2021-09-10</h1>
<ul>
<li><p class="startli">In <code>xkbcli interactive-x11</code>, use the Esc keysym instead of the Esc keycode for quitting.</p>
<p class="startli">Contributed by Simon Ser.</p>
</li>
<li>In <code>xkbcli how-to-type</code>, add <code>--keysym</code> argugment for how to type a keysym instead of a Unicode codepoint.</li>
<li><p class="startli">Fix a crash in <code>xkb_x11_keymap_new_from_device()</code> error handling given some invalid keymaps. Regressed in 1.2.0.</p>
<p class="startli">Reported by Zack Weinberg. Tested by Uli Schlachter.</p>
</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-130--2021-05-01"></a>
libxkbcommon 1.3.0 – 2021-05-01</h1>
<ul>
<li><p class="startli">Change <code>xkbcli list</code> to output YAML, instead of the previous ad-hoc format.</p>
<p class="startli">This allows to more easily process the information in a programmetic way, for example </p><pre class="fragment">xkbcli list | yq -r ".layouts[].layout"
</pre><p class="startli">Contributed by Peter Hutterer.</p>
</li>
<li>Optimize a certain part of keymap compilation (atom interning).</li>
<li><p class="startli">Fix segmentation fault in case-insensitive <code><a class="el" href="group__keysyms.html#gadf335e065050f306ff9094aefa6c9736" title="Get a keysym from its name.">xkb_keysym_from_name()</a></code> for certain values like the empty string.</p>
<p class="startli">Contributed by Isaac Freund.</p>
</li>
<li><p class="startli">Support building libxkbcommon as a meson subproject.</p>
<p class="startli">Contributed by Adrian Perez de Castro.</p>
</li>
<li><p class="startli">Add <code>ftruncate</code> fallback for <code>posix_fallocate</code> in <code>xkbcli interactive-wayland</code> for FreeBSD.</p>
<p class="startli">Contributed by Evgeniy Khramtsov.</p>
</li>
<li><p class="startli">Properly export library symbols in MSVC.</p>
<p class="startli">Contributed by Adrian Perez de Castro.</p>
</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-121--2021-04-07"></a>
libxkbcommon 1.2.1 – 2021-04-07</h1>
<ul>
<li>Fix <code>xkb_x11_keymap_new_from_device()</code> failing when the keymap contains key types with missing level names, like the one used by the <code>numpad:mac</code> option in <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/">xkeyboard-config</a>. Regressed in 1.2.0.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-120--2021-04-03"></a>
libxkbcommon 1.2.0 – 2021-04-03</h1>
<ul>
<li><p class="startli"><code>xkb_x11_keymap_new_from_device()</code> is much faster. It now performs only 2 roundtrips to the X server, instead of dozens (in first-time calls).</p>
<p class="startli">Contributed by Uli Schlachter.</p>
</li>
<li>Case-sensitive <code><a class="el" href="group__keysyms.html#gadf335e065050f306ff9094aefa6c9736" title="Get a keysym from its name.">xkb_keysym_from_name()</a></code> is much faster.</li>
<li>Keysym names of the form <code>0x12AB</code> and <code>U12AB</code> are parsed more strictly. Previously the hexadecimal part was parsed with <code>strtoul()</code>, now only up to 8 hexadecimal digits (<code>0-9A-Fa-f</code>) are allowed.</li>
<li>Compose files now have a size limit (65535 internal nodes). Further sequences are discared and a warning is issued.</li>
<li>Compose table loading (<code>xkb_compose_table_new_from_locale()</code> and similar) is much faster.</li>
<li>Use <code>poll()</code> instead of <code>epoll()</code> for <code>xlbcli interactive-evdev</code>, making it portable to FreeBSD which provides evdev but not epoll. On FreeBSD, remember to install the <code>evdev-proto</code> package to get the evdev headers.</li>
<li>The build now requires a C11 compiler (uses anonymous structs/unions).</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-110--2021-02-27"></a>
libxkbcommon 1.1.0 – 2021-02-27</h1>
<ul>
<li>Publish the <code>xkb-format-text-v1.md</code> file in the HTML documentation. This file existed for a long time but only in the Git repository. Link: <a href="https://xkbcommon.org/doc/current/md_doc_keymap_format_text_v1.html">https://xkbcommon.org/doc/current/md_doc_keymap_format_text_v1.html</a></li>
<li><p class="startli">Add partial documentation for <code>xkb_symbols</code> to <code>xkb-format-text-v1.md</code>.</p>
<p class="startli">Contributed by Simon Zeni.</p>
</li>
<li><p class="startli">Update keysym definitions to latest xorgproto. In particular, this adds many special keysyms corresponding to Linux evdev keycodes.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li>New API: Too many <code>XKB_KEY_*</code> definitions to list here.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-103--2020-11-23"></a>
libxkbcommon 1.0.3 – 2020-11-23</h1>
<ul>
<li>Fix (hopefully) a segfault in <code>xkb_x11_keymap_new_from_device()</code> in some unclear situation (bug introduced in 1.0.2).</li>
<li>Fix keymaps created with <code>xkb_x11_keymap_new_from_device()</code> don’t have level names (bug introduced in 0.8.0).</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-102--2020-11-20"></a>
libxkbcommon 1.0.2 – 2020-11-20</h1>
<ul>
<li>Fix a bug where a keysym that cannot be resolved in a keymap gets compiled to a garbage keysym. Now it is set to <code>XKB_KEY_NoSymbol</code> instead.</li>
<li>Improve the speed of <code>xkb_x11_keymap_new_from_device()</code> on repeated calls in the same <code><a class="el" href="structxkb__context.html" title="Opaque top level library context object.">xkb_context()</a></code>.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-101--2020-09-11"></a>
libxkbcommon 1.0.1 – 2020-09-11</h1>
<ul>
<li>Fix the <code>tool-option-parsing</code> test failing.</li>
<li>Remove requirement for pytest in the tool-option-parsing test.</li>
<li>Make the table output of <code>xkbcli how-to-type</code> aligned.</li>
<li>Some portability and test isolation fixes.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-100--2020-09-05"></a>
libxkbcommon 1.0.0 – 2020-09-05</h1>
<p>Note: this release is API and ABI compatible with previous releases –the major version bump is only an indication of stability.</p>
<ul>
<li><p class="startli">Add libxkbregistry as configure-time optional library. libxkbregistry is a C library that lists available XKB models, layouts and variants for a given ruleset. This is a separate library (<code>libxkbregistry.so</code>, pkgconfig file <code>xkbregistry.pc</code>) and aimed at tools that provide a listing of available keyboard layouts to the user. See the Documentation for details on the API.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li><p class="startli">Better support custom user configuration:</p><ul>
<li><p class="startli">Allow including XKB files from other paths.</p>
<p class="startli">Previously, a <code>symbols/us</code> file in path A would shadow the same file in path B. This is suboptimal, we rarely need to hide the system files - we care mostly about <em>extending</em> them. By continuing to check other lookup paths, we make it possible for a <code>$XDG_CONFIG_HOME/xkb/symbols/us</code> file to have sections including those from <code>/usr/share/X11/xkb/symbols/us</code>.</p>
<p class="startli">Note that this is not possible for rules files, which need to be manually controlled to get the right bits resolved.</p>
</li>
<li><p class="startli">Add /etc/xkb as extra lookup path for system data files.</p>
<p class="startli">This completes the usual triplet of configuration locations available for most processes:</p><ul>
<li>vendor-provided data files in <code>/usr/share/X11/xkb</code></li>
<li>system-specific data files in <code>/etc/xkb</code></li>
<li>user-specific data files in <code>$XDG_CONFIG_HOME/xkb</code></li>
</ul>
<p class="startli">The default lookup order user, system, vendor, just like everything else that uses these conventions.</p>
<p class="startli">For include directives in rules files, the <code>E</code> resolves to that path.</p>
</li>
<li>Add a new section to the documentation for custom user configuration.</li>
</ul>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li><p class="startli">Add an <code>xkbcli</code> command-line utility.</p>
<p class="startli">This tool offers various subcommands for introspection and debugging. Currently the available subcommands are:</p>
<dl>
<dt>list </dt>
<dd>List available rules, models, layouts, variants and options </dd>
<dt>interactive-wayland </dt>
<dd>Interactive debugger for XKB keymaps for Wayland </dd>
<dt>interactive-x11 </dt>
<dd>Interactive debugger for XKB keymaps for X11 </dd>
<dt>interactive-evdev </dt>
<dd>Interactive debugger for XKB keymaps for evdev (Linux) </dd>
<dt>compile-keymap </dt>
<dd>Compile an XKB keymap </dd>
<dt>how-to-type </dt>
<dd>See separate entry below. </dd>
</dl>
<p class="startli">See the manpages for usage information.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li><p class="startli">Add <code><a class="el" href="group__keysyms.html#ga5fde9cc397ae996b4efac56c9cd6bd18" title="Get the keysym corresponding to a Unicode/UTF-32 codepoint.">xkb_utf32_to_keysym()</a></code> to translate a Unicode codepoint to a keysym. When a special keysym (<code>XKB_KEY_</code> constant) for the codepoint exists, it is returned, otherwise the direct encoding is used, if permissible.</p>
<p class="startli">Contributed by Jaroslaw Kubik &lt;@froglogic.com&gt;.</p>
</li>
<li><p class="startli">Add <code>xkb_keymap_key_get_mods_for_level()</code> which retrieves sets of modifiers which produce a given shift level in a given key+layout.</p>
<p class="startli">Contributed by Jaroslaw Kubik &lt;@froglogic.com&gt;.</p>
</li>
<li><p class="startli">Add <code>xkbcli how-to-type</code> command, which, using <code><a class="el" href="group__keysyms.html#ga5fde9cc397ae996b4efac56c9cd6bd18" title="Get the keysym corresponding to a Unicode/UTF-32 codepoint.">xkb_utf32_to_keysym()</a></code> and <code>xkb_keymap_key_get_mods_for_level()</code> and other APIs, prints out all the ways to produce a given keysym.</p>
<p class="startli">For example, how to type <code>?</code> (codepoint 63) in a <code>us,de</code> keymap? </p><pre class="fragment">$ xkbcli how-to-type --layout us,de 63 | column -ts $'\t'
keysym: question (0x3f)
KEYCODE  KEY NAME  LAYOUT#  LAYOUT NAME   LEVEL#  MODIFIERS
20       AE11      2        German        2       [ Shift ]
20       AE11      2        German        2       [ Shift Lock ]
61       AB10      1        English (US)  2       [ Shift ]
</pre></li>
</ul>
<ul>
<li>Add a new section to the documentation describing the format of the XKB rules file.</li>
<li><p class="startli">Search for Compose in <code>$XDG_CONFIG_HOME/XCompose</code> (fallback to <code>~/.config/XCompose</code>) before trying <code>$HOME/.XCompose</code>.</p>
<p class="startli">Note that libX11 still only searches in <code>$HOME/.XCompose</code>.</p>
<p class="startli">Contributed by Emmanuel Gil Peyrot &lt;@linkmauve.fr&gt;.</p>
</li>
<li>Bump meson requirement to &gt;= 0.49.0.</li>
<li>Fix build with byacc.</li>
<li><p class="startli">Fix building X11 tests on PE targets.</p>
<p class="startli">Contributed by Jon Turney &lt;@dronecode.org.uk&gt;</p>
</li>
<li>The tests no longer rely on bash, only Python (which is already used by meson).</li>
<li>New API: <code>xkb_utf32_to_keysym</code> <code>xkb_keymap_key_get_mods_for_level</code> <code>XKB_KEY_XF86FullScreen</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-0100--2020-01-18"></a>
libxkbcommon 0.10.0 – 2020-01-18</h1>
<ul>
<li>(security) Fix quadratic complexity in the XKB file parser. See commit message 7c42945e04a2107827a057245298dedc0475cc88 for details.</li>
<li><p class="startli">Add <code>$XDG_CONFIG_HOME/xkb</code> to the default search path. If <code>$XDG_CONFIG_HOME</code> is not set, <code>$HOME/.config/xkb</code> is used. If <code>$HOME</code> is not set, the path is not added.</p>
<p class="startli">The XDG path is looked up before the existing default search path $HOME/.xkb.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li><p class="startli">Add support for include statements in XKB rules files.</p>
<p class="startli">This is a step towards making local XKB customizations more tenable and convenient, without modifying system files.</p>
<p class="startli">You can now include other rules files like this: </p><pre class="fragment">! include %S/evdev
</pre><p class="startli">Two directives are supported, <code>H</code> to <code>$HOME</code> and <code>S</code> for the system-installed rules directory (usually <code>/usr/share/X11/xkb/rules</code>).</p>
<p class="startli">See commit message ca033a29d2ca910fd17b1ae287cb420205bdddc8 and doc/rules-format.txt in the xkbcommon source code for more information.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li><p class="startli">Downgrade “Symbol added to modifier map for multiple modifiers” log to a warning.</p>
<p class="startli">This error message was too annoying to be shown by default. When working on keymaps, set <code>XKB_LOG_LEVEL=debug XKB_LOG_VERBOSITY=10</code> to see all possible messages.</p>
</li>
<li><p class="startli">Support building on Windows using the meson MSVC backend.</p>
<p class="startli">Contributed by Adrian Perez de Castro &lt;@igalia.com&gt;.</p>
</li>
<li><p class="startli">Fix bug where the merge mode only applied to the first vmod in a <code>virtual_modifiers</code> statement. Given </p><pre class="fragment">augment virtual_modifiers NumLock,Alt,LevelThree
</pre><p class="startli">Previously it was incorrectly treated as </p><pre class="fragment">augment virtual_modifiers NumLock;
virtual_modifiers Alt;
virtual_modifiers LevelThree;
</pre><p class="startli">Now it is treated as </p><pre class="fragment">augment virtual_modifiers NumLock;
augment virtual_modifiers Alt;
augment virtual_modifiers LevelThree;
</pre></li>
</ul>
<ul>
<li><p class="startli">Reject interpret modifier predicate with more than one value. Given </p><pre class="fragment">interpret ISO_Level3_Shift+AnyOf(all,extraneous) { ... };
</pre><p class="startli">Previously, extraneous (and further) was ignored. Now it’s rejected.</p>
</li>
<li>Correctly handle capitalization of the ssharp keysym.</li>
<li><p class="startli">Speed up and improve the internal <code>xkeyboard-config</code> tool. This tool compiles all layout/variant combinations in the <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/">xkeyboard-config</a> dataset and reports any issues it finds.</p>
<p class="startli">Contributed by Peter Hutterer &lt;@who-t.net&gt;.</p>
</li>
<li>Speed up “atoms” (string interning). This code goes back at least to X11R1 (released 1987).</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-091--2019-10-19"></a>
libxkbcommon 0.9.1 – 2019-10-19</h1>
<ul>
<li>Fix context creation failing when run in privileged processes as defined by <code>secure_getenv(3)</code>, e.g. GDM.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-090--2019-10-19"></a>
libxkbcommon 0.9.0 – 2019-10-19</h1>
<ul>
<li>Move <code>~/.xkb</code> to before <code>XKB_CONFIG_ROOT</code> (the system XKB path, usually <code>/usr/share/X11/xkb</code>) in the default include path. This enables the user to have full control of the keymap definitions, instead of only augmenting them.</li>
<li>Remove the Autotools build system. Use the meson build system instead.</li>
<li>Fix invalid names used for levels above 8 when dumping keymaps. Previously, e.g. <code>Level20</code> was dumped, but only up to <code>Level8</code> is accepted by the parser. Now <code>20</code> is dumped.</li>
<li><p class="startli">Change level references to always be dumped as e.g. <code>5</code> instead of <code>Level5</code>.</p>
<p class="startli">Change group references to always be dumped capitalized e.g. <code>Group3</code> instead of <code>group3</code>. Previously it was inconsistent.</p>
<p class="startli">These changes affect the output of <code>xkb_keymap_get_as_string()</code>.</p>
</li>
<li>Fix several build issues on macOS/Darwin, Solaris, NetBSD, cross compilation.</li>
<li>Port the <code>interactive-wayland</code> test program to the stable version of <code>xdg-shell</code>.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-084--2019-02-22"></a>
libxkbcommon 0.8.4 – 2019-02-22</h1>
<ul>
<li>Fix build of xkbcommon-x11 static library with meson.</li>
<li>Fix building using meson from the tarball generated by autotools.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-083--2019-02-08"></a>
libxkbcommon 0.8.3 – 2019-02-08</h1>
<ul>
<li>Fix build of static libraries with meson. (Future note: xkbcommon-x11 was <em>not</em> fixed in this release.)</li>
<li>New API: <code>XKB_KEY_XF86MonBrightnessCycle</code> <code>XKB_KEY_XF86RotationLockToggle</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-082--2018-08-05"></a>
libxkbcommon 0.8.2 – 2018-08-05</h1>
<ul>
<li>Fix various problems found with fuzzing (see commit messages for more details):<ul>
<li>Fix a few NULL-dereferences, out-of-bounds access and undefined behavior in the XKB text format parser.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-081--2018-08-03"></a>
libxkbcommon 0.8.1 – 2018-08-03</h1>
<ul>
<li>Fix various problems found in the meson build (see commit messages for more details):<ul>
<li>Fix compilation on Darwin.</li>
<li>Fix compilation of the x11 tests and demos when XCB is installed in a non-standard location.</li>
<li>Fix <code>xkbcommon-x11.pc</code> missing the Requires specification.</li>
</ul>
</li>
<li>Fix various problems found with fuzzing and Coverity (see commit messages for more details):<ul>
<li>Fix stack overflow in the XKB text format parser when evaluating boolean negation.</li>
<li>Fix NULL-dereferences in the XKB text format parser when some unsupported tokens appear (the tokens are still parsed for backward compatibility).</li>
<li>Fix NULL-dereference in the XKB text format parser when parsing an <code>xkb_geometry</code> section.</li>
<li>Fix an infinite loop in the Compose text format parser on some inputs.</li>
<li>Fix an invalid <code>free()</code> when using multiple keysyms.</li>
</ul>
</li>
<li>Replace the Unicode characters for the leftanglebracket and rightanglebracket keysyms from the deprecated LEFT/RIGHT-POINTING ANGLE BRACKET to MATHEMATICAL LEFT/RIGHT ANGLE BRACKET.</li>
<li>Reject out-of-range Unicode codepoints in <code><a class="el" href="group__keysyms.html#ga55d6ce9127d42d37402d6df08a138de2" title="Get the Unicode/UTF-8 representation of a keysym.">xkb_keysym_to_utf8()</a></code> and <code><a class="el" href="group__keysyms.html#gaa21f81e097317fa9074fefeb0b265507" title="Get the Unicode/UTF-32 representation of a keysym.">xkb_keysym_to_utf32()</a></code>.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-080--2017-12-15"></a>
libxkbcommon 0.8.0 – 2017-12-15</h1>
<ul>
<li>Added <code>xkb_keysym_to_{upper,lower}</code> to perform case-conversion directly on keysyms. This is useful in some odd cases, but working with the Unicode representations should be preferred when possible.</li>
<li>Added Unicode conversion rules for the <code>signifblank</code> and <code>permille</code> keysyms.</li>
<li><p class="startli">Fixed a bug in the parsing of XKB key type definitions where the number of levels were determined by the number of level <em>names</em>. Keymaps which omit level names were hence miscompiled.</p>
<p class="startli">This regressed in version 0.4.3. Keymaps from <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/">xkeyboard-config</a> were not affected since they don’t omit level names.</p>
</li>
<li>New API: <code><a class="el" href="group__keysyms.html#ga616148547139853f6f413c9c0720780d" title="Convert a keysym to its uppercase form.">xkb_keysym_to_upper()</a></code> <code><a class="el" href="group__keysyms.html#gaf888d4d0f209222fe9c0b7b324fd90ca" title="Convert a keysym to its lowercase form.">xkb_keysym_to_lower()</a></code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-072--2017-08-04"></a>
libxkbcommon 0.7.2 – 2017-08-04</h1>
<ul>
<li><p class="startli">Added a Meson build system as an alternative to existing autotools build system.</p>
<p class="startli">The intent is to remove the autotools build in one of the next releases. Please try to convert to it and report any problems.</p>
<p class="startli">See <a href="http://mesonbuild.com/Quick-guide.html">http://mesonbuild.com/Quick-guide.html</a> for basic usage, the <code>meson_options.txt</code> for the project-specific configuration options, and the PACKAGING file for more details.</p>
<p class="startli">There are some noteworthy differences compared to the autotools build:</p><ul>
<li>Feature auto-detection is not performed. By default, all features are enabled (currently: <code>docs</code>, <code>x11</code>, <code>wayland</code>). The build fails if any of the required dependencies are not available. To disable a feature, pass <code>-Denable-&lt;feature&gt;=false</code> to meson.</li>
<li>The libraries are either installed as shared or static, as specified by the <code>-Ddefault_library=shared/static</code> option. With autotools, both versions are installed by default.</li>
<li><code>xorg-util-macros</code> is not used.</li>
<li>A parser generator (bison/byacc) is always required - there is no fallback to pre-generated output bundled in the tarball, as there is in autotools.</li>
</ul>
</li>
<li>Removed <code>Android.mk</code> support.</li>
<li>Removed the <code>*-uninstalled.pc</code> pkgconfig files.</li>
<li>Ported the <code>interactive-wayland</code> demo program to v6 of the <code>xdg-shell</code> protocol.</li>
<li>Added new keysym definitions from xproto.</li>
<li>New API: <code>XKB_KEY_XF86Keyboard</code> <code>XKB_KEY_XF86WWAN</code> <code>XKB_KEY_XF86RFKill</code> <code>XKB_KEY_XF86AudioPreset</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-071--2017-01-18"></a>
libxkbcommon 0.7.1 – 2017-01-18</h1>
<ul>
<li><p class="startli">Fixed various reported problems when the current locale is <code>tr_TR.UTF-8</code>.</p>
<p class="startli">The function <code><a class="el" href="group__keysyms.html#gadf335e065050f306ff9094aefa6c9736" title="Get a keysym from its name.">xkb_keysym_from_name()</a></code> used to perform case-insensitive string comparisons in a locale-dependent way, but required it to to work as in the C/ASCII locale (the so called “Turkish i problem”).</p>
<p class="startli">The function is now no longer affected by the current locale.</p>
</li>
<li>Fixed compilation in NetBSD.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-070--2016-11-11"></a>
libxkbcommon 0.7.0 – 2016-11-11</h1>
<ul>
<li><p class="startli">Added support for different “modes” of calculating consumed modifiers. The existing mode, based on the XKB standard, has proven to be unintuitive in various shortcut implementations.</p>
<p class="startli">A new mode, based on the calculation used by the GTK toolkit, is added. This mode is less eager to declare a modifier as consumed.</p>
</li>
<li>Added a new interactive demo program using the Wayland protocol. See the PACKAGING file for the new (optional) test dependencies.</li>
<li>Fixed a compilation error on GNU Hurd.</li>
<li>New API: <code>enum <a class="el" href="group__state.html#ga66c3ae7ebaf4ccd60e5dab61dc1c29fb" title="Consumed modifiers mode.">xkb_consumed_mode</a></code> <code>XKB_CONSUMED_MODE_XKB</code> <code>XKB_CONSUMED_MODE_GTK</code> <code>xkb_state_key_get_consumed_mods2()</code> <code>xkb_state_mod_index_is_consumed2()</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-061--2016-04-08"></a>
libxkbcommon 0.6.1 – 2016-04-08</h1>
<ul>
<li>Added LICENSE to distributed files in tarball releases.</li>
<li>Minor typo fix in <code>xkb_keymap_get_as_string()</code> documentation.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-060--2016-03-16"></a>
libxkbcommon 0.6.0 – 2016-03-16</h1>
<ul>
<li>If the <code>XKB_CONFIG_ROOT</code> environment variable is set, it is used as the XKB configuration root instead of the path determined at build time.</li>
<li>Tests and benchmarks now build correctly on OSX.</li>
<li><p class="startli">An XKB keymap provides a name for each key it defines. Traditionally, these names are limited to at most 4 characters, and are thus somewhat obscure, but might still be useful (xkbcommon lifts the 4 character limit).</p>
<p class="startli">The new functions <code>xkb_keymap_key_get_name()</code> and <code>xkb_keymap_key_by_name()</code> can be used to get the name of a key or find a key by name. Note that a key may have aliases.</p>
</li>
<li>Documentation improvements.</li>
<li>New API: <code>xkb_keymap_key_by_name()</code> <code>xkb_keymap_key_get_name()</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-050--2014-10-18"></a>
libxkbcommon 0.5.0 – 2014-10-18</h1>
<ul>
<li>Added support for Compose/dead keys in a new module (included in libxkbcommon). See the documentation or the <code><a class="el" href="xkbcommon-compose_8h.html" title="libxkbcommon Compose API - support for Compose and dead-keys.">xkbcommon/xkbcommon-compose.h</a></code> header file for more details.</li>
<li>Improved and reordered some sections of the documentation.</li>
<li>The doxygen HTML pages were made nicer to read.</li>
<li>Most tests now run also on non-linux platforms.</li>
<li>A warning is emitted by default about RMLVO values which are not used during keymap compilation, which are most often a user misconfiguration. For example, <code>terminate:ctrl_alt_backspace</code> instead of <code>terminate:ctrl_alt_bksp</code>.</li>
<li>Added symbol versioning for libxkbcommon and libxkbcommon-x11. Note: binaries compiled against this and future versions will not be able to link against the previous versions of the library.</li>
<li><p class="startli">Removed several compatablity symbols from the binary (the API isn’t affected). This affects binaries which</p><ol type="1">
<li>Were compiled against a pre-stable (&lt;0.2.0) version of libxkbcommon, and</li>
<li>Are linked against the this or later version of libxkbcommon.</li>
</ol>
<p class="startli">Such a scenario is likely to fail already.</p>
</li>
<li>If Xvfb is not available, the x11comp test is now correctly skipped instead of hanging.</li>
<li>Benchmarks were moved to a separate bench/ directory.</li>
<li>Build fixes from OpenBSD.</li>
<li>Fixed a bug where key type entries such as <code>map[None] = Level2;</code> were ignored.</li>
<li>New API: <code>XKB_COMPOSE_*</code> <code>xkb_compose_*</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-043--2014-08-19"></a>
libxkbcommon 0.4.3 – 2014-08-19</h1>
<ul>
<li><p class="startli">Fixed a bug which caused <code>xkb_x11_keymap_new_from_device()</code> to misrepresent modifiers for some keymaps.</p>
<p class="startli"><a href="https://github.com/xkbcommon/libxkbcommon/issues/9">https://github.com/xkbcommon/libxkbcommon/issues/9</a></p>
</li>
<li>Fixed a bug which caused <code>xkb_x11_keymap_new_from_device()</code> to ignore XKB <code>PrivateAction</code>’s.</li>
<li>Modifiers are now always fully resolved after <code>xkb_state_update_mask()</code>. Previously the given state components were used as-is, without considering virtual modifier mappings. Note: this only affects non-standard uses of <code>xkb_state_update_mask()</code>.</li>
<li>Added a test for xkbcommon-x11, <code>x11comp</code>. The test uses the system’s Xvfb server and xkbcomp. If they do not exist or fail, the test is skipped.</li>
<li>Fixed memory leaks after parse errors in the XKB yacc parser. The fix required changes which are currently incompatible with byacc.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-042--2014-05-15"></a>
libxkbcommon 0.4.2 – 2014-05-15</h1>
<ul>
<li>Fixed a bug where explicitly passing <code>--enable-x11</code> to <code>./configure</code> would in fact disable it (regressed in 0.4.1).</li>
<li>Added <code>@since</code> version annotations to the API documentation for everything introduced after the initial stable release (0.2.0).</li>
<li>Added a section to the documentation about keysym transformations, and clarified which functions perform a given transformation.</li>
<li>XKB files which fail to compile during keymap construction can no longer have any effect on the resulting keymap: changes are only applied when the entire compilation succeeds. Note: this was a minor correctness issue inherited from xkbcomp.</li>
<li>Fix an out-of-bounds array access in <code>src/x11/util.c:adopt_atoms()</code> error-handling code. Note: it seems impossible to trigger in the current code since the input size cannot exceed the required size.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-041--2014-03-27"></a>
libxkbcommon 0.4.1 – 2014-03-27</h1>
<ul>
<li>Converted README to markdown and added a Quick Guide to the documentation, which breezes through the most common parts of xkbcommon.</li>
<li>Added two new functions, <code>xkb_state_key_get_utf{8,32}()</code>. They combine the operations of <code>xkb_state_key_get_syms()</code> and <code>xkb_keysym_to_utf{8,32}()</code>, and provide a nicer interface for it (especially for multiple-keysyms-per-level).</li>
<li><p class="startli">The <code>xkb_state_key_get_utf{8,32}()</code> functions now apply Control transformation: when the Control modifier is active, the string is converted to an appropriate control character. This matches the behavior of libX11’s <code>XLookupString(3)</code>, and required by the XKB specification: <a href="https://www.x.org/releases/current/doc/kbproto/xkbproto.html#Interpreting_the_Control_Modifier">https://www.x.org/releases/current/doc/kbproto/xkbproto.html#Interpreting_the_Control_Modifier</a></p>
<p class="startli"><a href="https://bugs.freedesktop.org/show_bug.cgi?id=75892">https://bugs.freedesktop.org/show_bug.cgi?id=75892</a></p>
</li>
<li>The consumed modifiers for a key are now calculated similarly to libX11. The previous behavior caused a bug where Shift would not cancel an active Caps Lock.</li>
<li><p class="startli">Make xkbcommon-x11 work with the keymap reported by the XQuartz X server.</p>
<p class="startli"><a href="https://bugs.freedesktop.org/show_bug.cgi?id=75798">https://bugs.freedesktop.org/show_bug.cgi?id=75798</a></p>
</li>
<li>Reduce memory usage during keymap compilation some more.</li>
<li>New API: <code>xkb_state_key_get_consumed_mods()</code> <code>xkb_state_key_get_utf8()</code> <code>xkb_state_key_get_utf32()</code></li>
<li>Deprecated API: <code>XKB_MAP_COMPILE_PLACEHOLDER,</code> <code>XKB_MAP_NO_FLAGS</code> use <code>XKB_KEYMAP_NO_FLAGS</code> instead.</li>
<li>Bug fixes.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-040--2014-02-02"></a>
libxkbcommon 0.4.0 – 2014-02-02</h1>
<ul>
<li>Add a new add-on library, <code>xkbcommon-x11</code>, to support creating keymaps with the XKB X11 protocol, by querying the X server directly. See the <code><a class="el" href="xkbcommon-x11_8h.html" title="libxkbcommon-x11 API - Additional X11 support for xkbcommon.">xkbcommon/xkbcommon-x11.h</a></code> header file for more details. This library requires <code>libxcb-xkb &gt;= 1.10</code>, and is enabled by default. It can be disabled with the <code>--disable-x11</code> configure switch. Distributions are encouraged to split the necessary files for this library (<code>libxkbcommon-x11.so</code>, <code>xkbcommon-x11.pc</code>, <code><a class="el" href="xkbcommon-x11_8h.html" title="libxkbcommon-x11 API - Additional X11 support for xkbcommon.">xkbcommon/xkbcommon-x11.h</a></code>) to a separate package, such that the main package does not depend on X11 libraries.</li>
<li>Fix the keysym ↔ name lookup table to not require huge amounts of relocations.</li>
<li>Fix a bug in the keysym ↔ name lookup, whereby lookup might fail in some rare cases.</li>
<li>Reduce memory usage during keymap compilation.</li>
<li>New API: New keysyms from xproto 7.0.25 (German T3 layout keysyms). <code>XKB_MOD_NAME_NUM</code> for the usual NumLock modifier. <code>xkb_x11_*</code> types and functions, <code>XKB_X11_*</code> constants.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-032--2013-11-22"></a>
libxkbcommon 0.3.2 – 2013-11-22</h1>
<ul>
<li>Log messages from the library now look like <code>xkbcommon: ERROR</code> by default, instead of xkbcomp-like <code>Error:</code>.</li>
<li>Apply capitalization transformation on keysyms in <code>xkb_keysym_get_one_sym()</code>, to match the behavior specified in the XKB specification: <a href="https://www.x.org/releases/current/doc/kbproto/xkbproto.html#Interpreting_the_Lock_Modifier">https://www.x.org/releases/current/doc/kbproto/xkbproto.html#Interpreting_the_Lock_Modifier</a></li>
<li>Support byacc for generating the parser, in addition to Bison.</li>
<li>New API: <code>XKB_KEY_XF86AudioMicMute</code> keysym from xproto 7.0.24. <code>XKB_KEYSYM_NO_FLAGS</code> <code>XKB_CONTEXT_NO_FLAGS</code> <code>XKB_MAP_COMPILE_NO_FLAGS</code></li>
<li>Bug fixes.</li>
</ul>
<h1><a class="anchor" id="libxkbcommon-031--2013-06-03"></a>
libxkbcommon 0.3.1 – 2013-06-03</h1>
<ul>
<li>Replace the flex scanner with a hand-written one. flex is no longer a build requirement.</li>
<li>New API: <code>xkb_keymap_min_keycode()</code> <code>xkb_keymap_max_keycode()</code> <code>xkb_keymap_key_for_each()</code></li>
</ul>
<h1><a class="anchor" id="libxkbcommon-030--2013-04-01"></a>
libxkbcommon 0.3.0 – 2013-04-01</h1>
<ul>
<li>Allow passing NULL to <code>*_unref()</code> functions; do nothing instead of crashing.</li>
<li>The functions <code>xkb_keymap_num_levels_for_key()</code> and <code>xkb_keymap_get_syms_by_level()</code> now allow out-of-range values for the <code>layout</code> parameter. The functions now wrap the value around the number of layouts instead of failing.</li>
<li>The function <code><a class="el" href="group__keysyms.html#ga2a06b575bfc0fef9655bb7f860737965" title="Get the name of a keysym.">xkb_keysym_get_name()</a></code> now types unicode keysyms in uppercase and 0-padding, to match the format used by <code>XKeysymToString()</code>.</li>
<li>Building Linux-specific tests is no longer attempted on non-Linux environments.</li>
<li>The function <code>xkb_keymap_new_from_names()</code> now accepts a NULL value for the <code>names</code> parameter, instead of failing. This is equivalent to passing a <code>struct <a class="el" href="structxkb__rule__names.html" title="Names to compile a keymap with, also known as RMLVO.">xkb_rule_names</a></code> with all fields set to NULL.</li>
<li>New API: <code>xkb_keymap_new_from_buffer()</code></li>
<li>Bug fixes.   </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
