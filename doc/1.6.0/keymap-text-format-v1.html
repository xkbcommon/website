<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libxkbcommon: The XKB keymap text format, V1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libxkbcommon<span id="projectnumber">&#160;1.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">The XKB keymap text format, V1</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#terminology">Terminology</a></li>
<li class="level1"><a href="#introduction">Introduction to the XKB text format</a><ul><li class="level2"><a href="#autotoc_md22">Keywords</a></li>
<li class="level2"><a href="#autotoc_md23">Literals</a></li>
</ul>
</li>
<li class="level1"><a href="#the-xkb_keymap-block">The “xkb_keymap” block</a></li>
<li class="level1"><a href="#the-xkb_keycodes-section">The “xkb_keycodes” section</a><ul><li class="level2"><a href="#autotoc_md24">Keycode statements</a></li>
<li class="level2"><a href="#autotoc_md25">Alias statements</a></li>
<li class="level2"><a href="#indicator-name">LED name statements</a></li>
</ul>
</li>
<li class="level1"><a href="#the-xkb_types-section">The “xkb_types” section</a><ul><li class="level2"><a href="#autotoc_md26">Type definitions</a></li>
</ul>
</li>
<li class="level1"><a href="#the-xkb_compat-section">The “xkb_compat” section</a><ul><li class="level2"><a href="#interpret-statements">Interpret statements</a></li>
<li class="level2"><a href="#indicator-effect">LED map statements</a></li>
<li class="level2"><a href="#autotoc_md39">Default values</a></li>
</ul>
</li>
<li class="level1"><a href="#the-xkb_symbols-section">The “xkb_symbols” section</a><ul><li class="level2"><a href="#autotoc_md40">Name statements</a></li>
<li class="level2"><a href="#autotoc_md41">Include statements</a></li>
<li class="level2"><a href="#autotoc_md42">Key statement</a></li>
</ul>
</li>
<li class="level1"><a href="#virtual-modifier-statements">Virtual modifier statements</a></li>
<li class="level1"><a href="#modifiers-bindings">Modifiers bindings</a><ul><li class="level2"><a href="#autotoc_md46">Real and virtual modifiers</a></li>
<li class="level2"><a href="#autotoc_md47">Define and use a modifier</a></li>
</ul>
</li>
<li class="level1"><a href="#key-actions">Key actions</a><ul><li class="level2"><a href="#modifiers-actions">Modifiers actions</a></li>
<li class="level2"><a href="#group-actions">Group actions</a></li>
<li class="level2"><a href="#legacy-actions">Unsupported legacy actions</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This document describes the <code>XKB_KEYMAP_FORMAT_TEXT_V1</code> keymap format, as implemented by libxkbcommon.</p>
<p>The standard database of keyboard configuration data is <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config">xkeyboard-config</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Due to the complexity of the format, this document is still is construction. Some additional resources are:</dd>
<dd>
<ul>
<li><a href="https://web.archive.org/web/20190724015820/http://pascal.tsu.ru/en/xkb/">Ivan Pascal's XKB documentation</a></li>
<li><a href="https://www.charvolant.org/doug/xkb/html/index.html">An Unreliable Guide to XKB Configuration</a></li>
<li><a href="https://www.x.org/releases/current/doc/kbproto/xkbproto.html">The X Keyboard Extension: Protocol Specification</a></li>
<li><a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/-/blob/master/docs/README.enhancing">How to enhance XKB configuration</a></li>
<li><a href="https://wiki.archlinux.org/index.php/X_keyboard_extension">ArchWiki XKB page</a></li>
</ul>
</dd></dl>
<h1><a class="anchor" id="terminology"></a>
Terminology</h1>
<dl>
<dt><a class="anchor" id="keycode-def"></a>Keycode</dt>
<dd></dd>
<dt></dt>
<dd><p class="startdd">Code that identifies a physical key on a keyboard.</p>
<ul>
<li><em>Raw</em> keycodes are the numeric identifiers used as input in XKB. They are the result of the low-level processing of the data that keyboards send to a computer. For instance <code>36</code> may represent the return key.</li>
<li><em>XKB</em> keycodes are <em>symbolic</em> names assigned to raw keycodes in order to facilitate their mapping to symbols. For instance the keycode for the return key is the abbreviation <code>RTRN</code>.</li>
</ul>
<p class="enddd">See <a class="el" href="keymap-text-format-v1.html#the-xkb_keycodes-section">xkb_keycodes</a> for further details.  </p>
</dd>
<dt><a class="anchor" id="keysym-def"></a>Symbols </dt>
<dd><p class="startdd">A <em>keysym</em> (short for “key symbol”) is a numeric encoding of a symbol on the cap of a key.</p>
<p class="interdd">They have a canonical name for convenience. It can be:</p>
<ul>
<li>A <em>character:</em> e.g. <code>a</code> and <code>A</code> for Latin scripts, <code>alpha</code> “α” and <code>ALPHA</code> “Α” for Greek, etc.</li>
<li><p class="startli">A <em>dead key:</em> e.g. <code>dead_grave</code> and <code>dead_diaeresis</code>, corresponding respectively to the <a href="https://en.wikipedia.org/wiki/Grave_accent">grave accent</a> and the <a href="https://en.wikipedia.org/wiki/Diaeresis_%28diacritic%29">diaeresis</a> diacritics.</p>
<p class="startli">A <a href="https://en.wikipedia.org/wiki/Dead_key">dead key</a> is a special kind of key that does not generate a character by itself, but modifies the character generated by the key struck(s) immediately after.</p>
</li>
<li>A <em><a class="el" href="keymap-text-format-v1.html#modifier-def">modifier</a>⁠:</em> e.g. <code>Shift_L</code>, <code>Control_R</code>, <code>Caps_Lock</code>. See hereinafter.</li>
<li>A <em>system action:</em> e.g. the arrow <code>Left</code>, <code>Pause</code>, <code>Escape</code>, <code>F1</code>.</li>
</ul>
<p class="interdd">The complete list of keysyms is defined in <code><a class="el" href="xkbcommon-keysyms_8h.html" title="Key symbols (keysyms) definitions.">xkbcommon/xkbcommon-keysyms.h</a></code>.</p>
<p class="enddd">See <a class="el" href="keymap-text-format-v1.html#the-xkb_symbols-section">xkb_symbols</a> for further details on binding keysyms to keycodes.  </p>
</dd>
<dt><a class="anchor" id="modifier-def"></a>Modifier </dt>
<dd><p class="startdd">A <em>modifier key</em> is a key that modifies the effect of other keys: e.g. Shift, Control, Caps Lock, etc.</p>
<p class="interdd">The state of a modifier key (active/inactive) is encoded as a <em>modifier index</em> (or modifier bit or simply modifier) and has an associated <em>unique name</em>.</p>
<p class="interdd">For historical reasons, modifiers are divided in two categories:</p>
<dl>
<dt><a class="anchor" id="real-modifier-def"></a>Real modifiers </dt>
<dd><p class="startdd">They are the 8 <em>predefined</em> (AKA core, X11) modifiers (see <a class="el" href="keymap-text-format-v1.html#usual-modifiers">usual modifiers</a> hereinafter).</p>
<p class="interdd">Real modifiers ensure backward compatibility: indeed they are the actual bits used to compute the <a class="el" href="keymap-text-format-v1.html#level-def">levels</a> and are communicated via the API of xkbcommon.</p>
<p class="enddd">Some are generic modifiers (<code>Mod[1-5]</code>) that do not have a conventional interpretation and are the motivation of the introduction of <a class="el" href="keymap-text-format-v1.html#virtual-modifier-def">virtual modifiers</a>.  </p>
</dd>
<dt><a class="anchor" id="virtual-modifier-def"></a>Virtual modifiers </dt>
<dd>They are the modifiers that are <em>not</em> predefined.  </dd>
</dl>
<p class="interdd">Each modifier defines a <em>mapping</em> to one or multiple <em>real</em> modifier. Real modifiers map to themselves.</p>
<p class="interdd">The following table lists the <a class="anchor" id="usual-modifiers"></a>usual modifiers present in the <a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config">standard keyboard configuration</a>. Note that this is provided for information only, as it may change depending on the user configuration.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Modifier   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Usual mapping   </th><th class="markdownTableHeadNone">Comment    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Shift</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Shift</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Control_key">Shift</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Lock</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Lock</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Caps_Lock">Caps Lock</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Control</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Control</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Control_key">Control</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Mod1</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Mod1</code>   </td><td class="markdownTableBodyNone">Not conventional    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Mod2</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Mod2</code>   </td><td class="markdownTableBodyNone">Not conventional    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Mod3</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Mod3</code>   </td><td class="markdownTableBodyNone">Not conventional    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Mod4</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Mod4</code>   </td><td class="markdownTableBodyNone">Not conventional    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Mod5</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>Mod5</code>   </td><td class="markdownTableBodyNone">Not conventional    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Alt</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod1</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Alt_key">Alt</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Meta</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod1</code> or <code>Mod4</code>   </td><td class="markdownTableBodyNone">The legacy <a href="https://en.wikipedia.org/wiki/Meta_key">Meta</a> key    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NumLock</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod2</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Num_Lock">NumLock</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Super</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod4</code>   </td><td class="markdownTableBodyNone">The usual <a href="https://en.wikipedia.org/wiki/Super_key_(keyboard_button)">Super</a>/GUI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LevelThree</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod3</code>   </td><td class="markdownTableBodyNone"><a href="https://en.wikipedia.org/wiki/ISO/IEC_9995">ISO</a> level 3, aka <a href="https://en.wikipedia.org/wiki/AltGr_key">AltGr</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LevelFive</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>Mod5</code>   </td><td class="markdownTableBodyNone"><a href="https://en.wikipedia.org/wiki/ISO/IEC_9995">ISO</a> level 5   </td></tr>
</table>
<p class="interdd">A modifier key can report its state in one of the following 3 ways:</p>
<dl>
<dt><a class="anchor" id="depressed-mod-def"></a>Depressed </dt>
<dd>Active while depressed; e.g. the usual Shift. </dd>
<dt><a class="anchor" id="latched-mod-def"></a>Latched </dt>
<dd>Activated when pressed and deactivated after the next non-modifier key press.  </dd>
<dt><a class="anchor" id="locked-mod-def"></a>Locked </dt>
<dd>Activated when pressed and deactivated when pressed again; e.g. the usual Caps Lock.  </dd>
</dl>
<p class="interdd">See <a class="el" href="keymap-text-format-v1.html#modifiers-bindings">modifiers bindings</a> for further details. </p>
<p class="enddd"></p>
</dd>
<dt><a class="anchor" id="level-def"></a>Shift Level </dt>
<dd><p class="startdd">A key may produce different results depending of the active modifiers: e.g. for a Latin script, pressing the key A produces “a” and holding Shift while pressing A produces “A”.</p>
<p class="interdd">This various results are organized in an ordered list; the <em>index</em> of each entry is called a <a class="anchor" id="level-index-def"></a>shift level or simply level. By convention the lowest level is the result when no modifier is active. Example for the key <code>A</code> on latin script keyboard:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Keysym   </th><th class="markdownTableHeadNone">Active key modifiers    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Lower case letters   </td><td class="markdownTableBodyNone"><code>a</code>   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Upper case letters.   </td><td class="markdownTableBodyNone"><code>A</code>   </td><td class="markdownTableBodyNone"><code>Shift</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Alternative lower case letters   </td><td class="markdownTableBodyNone"><code>ae</code>   </td><td class="markdownTableBodyNone"><code>AltGr</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Alternative upper case letters   </td><td class="markdownTableBodyNone"><code>AE</code>   </td><td class="markdownTableBodyNone"><code>Shift</code> + <code>AltGr</code>   </td></tr>
</table>
<p class="interdd">A key shift level is the logical <em>state</em> of a key corresponding to the current shift level it used.</p>
<p class="interdd">Key shift levels are derived from the modifiers states, but not necessarily in the same way for all keys. For example, for Latin script the Caps Lock modifier selects the level 2 for alphabetic keys such as <code>A</code> but has no effect on a numeric key.</p>
<p class="enddd">There are groups of keys with the same characteristics: letters, punctuation, numeric keypad, etc. The meaning of their levels is identical and thus can be shared: this generalization is called a <em>key type</em> (see hereinafter).  </p>
</dd>
<dt><a class="anchor" id="key-type-def"></a>Key type </dt>
<dd><p class="startdd">A key type defines the levels available for a key and how to derive the active level from the modifiers states. Examples:</p><ul>
<li><code>ONE_LEVEL</code>: the key has only one level, i.e. it is not affected by any modifiers. Example: the modifiers themselves.</li>
<li><code>TWO_LEVEL</code>: the key has two levels:<ul>
<li>Level 1: default level, active when the <code>Shift</code> modifier is <em>not</em> active.</li>
<li>Level 2: level activated with the <code>Shift</code> modifier.</li>
</ul>
</li>
<li><code>FOUR_LEVEL</code>: see the example in the previous section.</li>
</ul>
<p class="enddd">See <a class="el" href="keymap-text-format-v1.html#the-xkb_types-section">xkb_types</a> for further details.  </p>
</dd>
<dt><a class="anchor" id="layout-def"></a>Layout </dt>
<dd><p class="startdd">A mapping of keycodes to symbols, actions and key types.</p>
<p class="interdd">A user who deals with multiple languages may need two or more different layouts: e.g. a layout for Arabic and another one for English. In this context, layouts are called <em>groups</em> in XKB, as defined in the <a href="https://en.wikipedia.org/wiki/ISO/IEC_9995">standard ISO/IEC&#160;9995</a>.</p>
<p class="interdd">Layouts are ordered and identified by their index. Example:</p>
<ul>
<li>Layout 1: Arabic</li>
<li>Layout 2: English</li>
</ul>
<p class="enddd"></p>
</dd>
<dt><a class="anchor" id="key-action-def"></a>Key Action </dt>
<dd><p class="startdd">In XKB world, a key action defines the effect a key has on the state of the keyboard or the state of the display server. Examples:</p>
<ul>
<li>Change the state of a modifier.</li>
<li>Change the active group.</li>
<li>Move the mouse pointer.</li>
</ul>
<p class="enddd">See the section “<a class="el" href="keymap-text-format-v1.html#key-actions">Key actions</a>” for further details.  </p>
</dd>
<dt><a class="anchor" id="indicator-def"></a>Indicator </dt>
<dd><p class="startdd">A keyboard indicator is a mean to report a specific aspect of the keyboard state.</p>
<dl>
<dt><em>Physical</em> indicator </dt>
<dd>Typically a labelled LED on the keyboard, e.g. “Caps Lock” and “Num Lock”.  </dd>
<dt><em>Logical</em> indicator </dt>
<dd><p class="startdd">A customizable derived state of the keyboard. Its changes creates events that can be monitored.</p>
<p class="interdd">There are two categories:</p>
<ul>
<li><p class="startli"><em>Real</em> indicators are those associated to a physical indicator. For example, the “Caps Lock” logical modifier controls the corresponding physical LED.</p>
<p class="startli">Because indicators are customizable, if one misses a “Num Lock” LED, one could define instead the “Caps Lock” <em>indicator</em> to activate its LED when the “Num Lock” <em>modifier</em> is active.</p>
</li>
<li><em>Virtual</em> indicators are not associated to a physical indicator. Their effect is only visible for programs monitoring them.</li>
</ul>
<p class="enddd">Note that the meanings of <em>real</em> and <em>virtual</em> is slightly different than the one used for <a class="el" href="keymap-text-format-v1.html#modifier-def">modifier</a>.  </p>
</dd>
</dl>
<p class="enddd">See: <code><a class="el" href="keymap-text-format-v1.html#indicator-name">xkb_keycodes</a></code> to define indicators and <code><a class="el" href="keymap-text-format-v1.html#indicator-effect">xkb_compat</a></code> to define their effects.  </p>
</dd>
<dt><a class="anchor" id="keymap-def"></a>Keymap </dt>
<dd><p class="startdd">The <em>complete</em> definition of the mapping of raw keycodes to symbols and actions. It fully defines the behavior of a keyboard.</p>
<p class="enddd">See <a class="el" href="keymap-text-format-v1.html#the-xkb_keymap-block">xkb_keymap</a> for further details.  </p>
</dd>
</dl>
<h1><a class="anchor" id="introduction"></a>
Introduction to the XKB text format</h1>
<p>The XKB text format uses a syntax similar to the <a href="https://en.wikipedia.org/wiki/C_(programming_language)#Syntax">C programming language</a>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>general comment on syntax: section, values, etc.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>the import mechanism</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>recommended ways to feed xkbcommon</dd></dl>
<h2><a class="anchor" id="autotoc_md22"></a>
Keywords</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>keywords, other settings such as “SetMods”</dd></dl>
<h2><a class="anchor" id="autotoc_md23"></a>
Literals</h2>
<dl>
<dt>String literal </dt>
<dd><p class="startdd">A string is surrounded by double quotes: “<code>&quot;</code>”. The following <em>escape sequences</em> are supported:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Escape sequence   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>\\</code>   </td><td class="markdownTableBodyNone">Backslash “<code>\</code>”    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>\b</code>   </td><td class="markdownTableBodyNone">Backspace    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>\e</code>   </td><td class="markdownTableBodyNone">Escape    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>\f</code>   </td><td class="markdownTableBodyNone">Form feed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>\n</code>   </td><td class="markdownTableBodyNone">Line feed (newline)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>\r</code>   </td><td class="markdownTableBodyNone">Carriage return    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>\t</code>   </td><td class="markdownTableBodyNone">Horizontal tabulation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>\v</code>   </td><td class="markdownTableBodyNone">Vertical tabulation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>\</code> + octal number   </td><td class="markdownTableBodyNone">Corresponding ASCII character: <code>\0</code> → NULL, <code>\42</code> → <code>"</code>   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>The string <em>encoding</em> is unspecified and not validated, but for best results, stick to ASCII.</dd></dl>
</dd>
<dt>Number literal </dt>
<dd><p class="startdd">A number can be written in three forms:</p>
<ul>
<li><em>decimal integer:</em> <code>1</code>, <code>123</code>, etc.</li>
<li><em>decimal floating-point number:</em> <code>1.23</code>, etc.</li>
<li><em>hexadecimal integer:</em> prefixed with <code>0x</code>: <code>0x123</code>, <code>0xff</code>, <code>0xAB</code>, etc.  </li>
</ul>
</dd>
</dl>
<h1><a class="anchor" id="the-xkb_keymap-block"></a>
The “xkb_keymap” block</h1>
<p>A <b><a class="el" href="keymap-text-format-v1.html#keymap-def">keymap</a></b> consists of a single top-level <code><a class="el" href="structxkb__keymap.html" title="Opaque compiled keymap object.">xkb_keymap</a></code> block, under which are nested the following sections:</p>
<dl>
<dt><code><a class="el" href="keymap-text-format-v1.html#the-xkb_keycodes-section">xkb_keycodes</a></code> </dt>
<dd>A translation of the hardware/evdev scancodes from the keyboard into XKB symbolic keycodes.  </dd>
<dt><code><a class="el" href="keymap-text-format-v1.html#the-xkb_types-section">xkb_types</a></code> </dt>
<dd>A specification of the modifier mask, target level and preserved modifiers various modifiers combination produce.  </dd>
<dt><code><a class="el" href="keymap-text-format-v1.html#the-xkb_compat-section">xkb_compat</a></code> </dt>
<dd>A specification of what actions various special-purpose keys produce.  </dd>
<dt><code><a class="el" href="keymap-text-format-v1.html#the-xkb_symbols-section">xkb_symbols</a></code> </dt>
<dd>A translation of symbolic key codes into actual symbols and actions.  </dd>
</dl>
<p>Overview of a keymap file:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structxkb__keymap.html">xkb_keymap</a> {</div>
<div class="line">  xkb_keycodes <span class="stringliteral">&quot;XXX&quot;</span> {</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">  }</div>
<div class="line">  xkb_types <span class="stringliteral">&quot;XXX&quot;</span> {</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">  };</div>
<div class="line">  xkb_compatibility <span class="stringliteral">&quot;XXX&quot;</span> {</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">  };</div>
<div class="line">  xkb_symbols <span class="stringliteral">&quot;XXX&quot;</span> {</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="ttc" id="astructxkb__keymap_html"><div class="ttname"><a href="structxkb__keymap.html">xkb_keymap</a></div><div class="ttdoc">Opaque compiled keymap object.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="the-xkb_keycodes-section"></a>
The “xkb_keycodes” section</h1>
<p>This is the simplest section type, and is the first one to be compiled. The purpose of this is mostly to map between the hardware/evdev scancodes and XKB [keycodes]. Each key is given a name by which it can be referred to later, e.g. in the symbols section.</p>
<h2><a class="anchor" id="autotoc_md24"></a>
Keycode statements</h2>
<p>Statements of the form: </p><pre class="fragment">&lt;TLDE&gt; = 49;
&lt;AE01&gt; = 10;
</pre><p> The above would let 49 and 10 be valid keycodes in the keymap, and assign them the names <code>TLDE</code> and <code>AE01</code> respectively. The format <code>&lt;WXYZ&gt;</code> is always used to refer to a key by name.</p>
<p>The naming convention <code>&lt;AE01&gt;</code> is based on the <a href="https://en.wikipedia.org/wiki/ISO/IEC_9995#ISO/IEC_9995-1">standard ISO/IEC&#160;9995-1</a>. It denotes the position of the key in the keyboard grid. It means: the main alphanumeric section (<code>A</code>), row <code>E</code> and column <code>01</code>.</p>
<p>The following figure illustrates the grid on a staggered standard US QWERTY keyboard. <code>&lt;AE01&gt;</code> corresponds to the key <code>1</code>.</p>
<div class="fragment"><div class="line">   \ 99 \ 00 \ 01 \ 02 \ 03 \ 04 \ 05…</div>
<div class="line">    \    \    \    \    \    \    \</div>
<div class="line">-----------------------------------------</div>
<div class="line">E     \    \ ^  \ 1  \ 2  \ 3  \ 4  \ 5…</div>
<div class="line">------------------------------------------</div>
<div class="line">D      \     Tab \ Q  \ W  \ E  \ R  \ T…</div>
<div class="line">-------------------------------------------</div>
<div class="line">C       \Caps     \ A  \ S  \ D  \ F  \ G…</div>
<div class="line">--------------------------------------------</div>
<div class="line">B        \Shift    \ Z  \ X  \ C  \ V  \ B…</div>
<div class="line">---------------------------------------------</div>
<div class="line">A         \Ctrl\GUI \Alt \Space…</div>
<div class="line">----------------------------------------------</div>
</div><!-- fragment --><p>In the common case this just maps to the evdev scancodes from <code>/usr/include/linux/input.h</code>, e.g. the following definitions: </p><pre class="fragment">#define KEY_GRAVE            41
#define KEY_1                2
</pre><p> correspond to the ones above. Similar definitions appear in the xf86-input-keyboard driver. Note that in all current keymaps there's a constant offset of 8 (for historical reasons).</p>
<p>Note that contrary to xkbcommon, the X11 protocol supports keycodes only up to <code>255</code>. Therefore, when interfacing with X11, keymaps and applications using keycodes beyond <code>255</code> should expect warnings.</p>
<p>If there's a conflict, like the same name given to different keycodes, or same keycode given different names, it is resolved according to the merge mode which applies to the definitions.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Alias statements</h2>
<p>Statements of the form: </p><pre class="fragment">alias &lt;MENU&gt; = &lt;COMP&gt;;
</pre><p> Allows to refer to a previously defined key (here <code>&lt;COMP&gt;</code>) by another name (here <code>&lt;MENU&gt;</code>). Conflicts are handled similarly to keycode statements.</p>
<h2><a class="anchor" id="indicator-name"></a>
LED name statements</h2>
<p>Statements of the form: </p><pre class="fragment">indicator 1 = "Caps Lock";
indicator 2 = "Num Lock";
indicator 3 = "Scroll Lock";
</pre><p> Assigns a name to the keyboard LED (AKA <a class="el" href="keymap-text-format-v1.html#indicator-def">indicator</a>) with the given index. The LED may be referred by this name later in the compat section and by the user.</p>
<h1><a class="anchor" id="the-xkb_types-section"></a>
The “xkb_types” section</h1>
<p>This section is the second to be processed, after <code>xkb_keycodes</code>. However, it is completely independent and could have been the first to be processed (it does not refer to specific keys as specified in the <code>xkb_keycodes</code> section).</p>
<p>This section defines <a class="el" href="keymap-text-format-v1.html#key-type-def">key types</a>, which, given a key and a keyboard state (i.e. modifier state and group), determine the <a class="el" href="keymap-text-format-v1.html#level-def">shift level</a> to be used in translating the key to <a class="el" href="keymap-text-format-v1.html#keysym-def">keysyms</a>. These types are assigned to each group in each key, in the <code>xkb_symbols</code> section.</p>
<p>Key types are called this way because, in a way, they really describe the "type" of the key (or more correctly, a specific group of the key). For example, an ordinary keymap will provide a type called <code>KEYPAD</code>, which consists of two levels, with the second level being chosen according to the state of the Num Lock (or Shift) modifiers. Another example is a type called <code>ONE_LEVEL</code>, which is usually assigned to keys such as Escape; these have just one level and are not affected by the modifier state. Yet more common examples are <code>TWO_LEVEL</code> (with Shift choosing the second level), <code>ALPHABETIC</code> (where Caps Lock may also choose the second level), etc.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Type definitions</h2>
<p>Statements of the form: </p><pre class="fragment">type "FOUR_LEVEL" { ... }
</pre><p> The above would create a new type named <code>FOUR_LEVEL</code>. The body of the definition may include statements of the following forms:</p>
<h3><a class="anchor" id="autotoc_md27"></a>
“level_name” statements</h3>
<pre class="fragment">level_name[Level1] = "Base";
</pre><p> Mandatory for each level in the type.</p>
<p>Gives each level in this type a descriptive name. It isn't used for anything.</p>
<p>Note: A level may be specified as Level[1-8] or just a number (can be more than 8).</p>
<h3><a class="anchor" id="autotoc_md28"></a>
“modifiers” statement</h3>
<pre class="fragment">modifiers = Shift+Lock+LevelThree;
</pre><p> Mandatory, should be specified only once.</p>
<p>A mask of real and virtual <a class="el" href="keymap-text-format-v1.html#modifier-def">modifiers</a>. These are the only modifiers being considered when matching the modifier state against the type. The other modifiers, whether active or not, are masked out in the calculation.</p>
<h3><a class="anchor" id="autotoc_md29"></a>
“map” entry statements</h3>
<pre class="fragment">map[Shift+LevelThree] = Level4;
</pre><p> Should have at least as many mappings as there are levels in the type.</p>
<p>If the active modifiers, masked with the type's modifiers (as stated above), match (i.e. equal) the modifiers inside the <code>map[]</code> statement, then the level in the right hand side is chosen. For example, in the above, if in the current keyboard state the <code>Shift</code> and <code>LevelThree</code> modifiers are active, while the <code>Lock</code> modifier is not, then the keysym(s) in the 4th level of the group will be returned to the user.</p>
<h3><a class="anchor" id="autotoc_md30"></a>
“preserve” statements</h3>
<pre class="fragment">map[Shift+Lock+LevelThree] = Level5;
preserve[Shift+Lock+LevelThree] = Lock;
</pre><p> When a key type is used for keysym translation, its modifiers are said to be "consumed". For example, in a simple US keymap, the "g" "g" key is assigned an ordinary <code>ALPHABETIC</code> key type, whose modifiers are Shift and Lock; then for the "g" key, these two modifiers are consumed by the translation. This information is relevant for applications which further process the modifiers, since by then the consumed modifiers have already "done their part" and should be masked out.</p>
<p>However, sometimes even if a modifier had already affected the key translation through the type, it should <em>not</em> be reported as consumed, for various reasons. In this case, a <code>preserve[]</code> statement can be used to augment the map entry. The modifiers inside the square brackets should match one of the map[] statements in the type (if there is no matching map entry, one mapping to Level1 is implicitly added). The right hand side should consists of modifiers from the type's modifiers; these modifiers are then "preserved" and not reported as consumed.</p>
<h1><a class="anchor" id="the-xkb_compat-section"></a>
The “xkb_compat” section</h1>
<p>This section is the third to be processed, after <code>xkb_keycodes</code> and <code>xkb_types</code>.</p>
<h2><a class="anchor" id="interpret-statements"></a>
Interpret statements</h2>
<p>Statements of the form: </p><pre class="fragment">interpret Num_Lock+Any { ... }
interpret Shift_Lock+AnyOf(Shift+Lock) { ... }
</pre><p> The <code><a class="el" href="keymap-text-format-v1.html#the-xkb_symbols-section">xkb_symbols</a></code> section (see below) allows the keymap author to perform, among other things, the following things for each key:</p>
<ul>
<li>Bind an <a class="el" href="keymap-text-format-v1.html#key-action-def">action</a>, like <code>SetMods</code> or <code>LockGroup</code>, to the key. Actions, like symbols, are specified for each level of each group in the key separately.</li>
<li>Add a <a class="el" href="keymap-text-format-v1.html#virtual-modifier-def">virtual modifier</a> to the key's virtual modifier mapping (<code>vmodmap</code>).</li>
<li>Specify whether the key should repeat or not.</li>
</ul>
<p>However, doing this for each key (or level) is tedious and inflexible. Interpret's are a mechanism to apply these settings to a bunch of keys/levels at once.</p>
<p>Each interpret specifies a condition by which it attaches to certain levels. The condition consists of two parts:</p>
<ul>
<li>A <b><a class="el" href="keymap-text-format-v1.html#keysym-def">keysym</a></b>. If the level has a different (or more than one) keysym, the match fails. Leaving out the keysym is equivalent to using the special value <code>Any</code> or the <code>NoSymbol</code> keysym, which always matches successfully.</li>
<li><p class="startli">A <b><a class="el" href="keymap-text-format-v1.html#modifier-def">modifier</a> predicate</b>. The predicate consists of:</p><ul>
<li><p class="startli">A <b>mask</b> of <em>real</em> modifiers: a <code>+</code>-separated list of modifiers or the special value <code>all</code>, which denotes all the modifiers.</p>
<p class="startli">The modifiers are matched against the key's modifier map (<code>modmap</code>).</p>
</li>
<li>A <b>matching operation</b>, that is one of the following:<ul>
<li><code>AnyOfOrNone</code> – The modmap must either be empty or include at least one of the specified modifiers.</li>
<li><code>AnyOf</code> – The modmap must include at least one of the specified modifiers.</li>
<li><code>Any</code> – Alias for <code>AnyOf(all)</code>.</li>
<li><code>NoneOf</code> – The modmap must not include any of the specified modifiers.</li>
<li><code>AllOf</code> – The modmap must include all of the specified modifiers (but may include others as well).</li>
<li><code>Exactly</code> – The modmap must be exactly the same as the specified modifiers.</li>
</ul>
</li>
</ul>
<p class="startli">Leaving out the predicate is equivalent to using <code>AnyOfOrNone(all)</code>. Leaving out just the matching condition is equivalent to using <code>Exactly</code>.</p>
</li>
</ul>
<p>An interpret may also include <code>useModMapMods = level1;</code> – see below.</p>
<p>If a <a class="el" href="keymap-text-format-v1.html#level-def">level</a> fulfils the conditions of several interprets, only the most specific one is used:</p>
<ul>
<li>A specific keysym will always match before a generic <code>NoSymbol</code> condition.</li>
<li>If the keysyms are the same, the interpret with the more specific matching operation is used. The above list is sorted from least to most specific.</li>
<li>If both the keysyms and the matching operations are the same (but the modifiers are different), the first interpret is used.</li>
</ul>
<p>As described above, once an interpret "attaches" to a level, it can bind an action to that level, add one virtual modifier to the key's vmodmap, or set the key's repeat setting. You should note the following:</p>
<ul>
<li>The key repeat is a property of the entire key; it is not level-specific. In order to avoid confusion, it is only inspected for the first level of the first group; the interpret's repeat setting is ignored when applied to other levels.</li>
<li>If one of the above fields was set directly for a key in <code>xkb_symbols</code>, the explicit setting takes precedence over the interpret.</li>
</ul>
<p>The body of the statement may include statements of the following forms (all of which are optional):</p>
<h3><a class="anchor" id="autotoc_md31"></a>
“useModMapMods” statement</h3>
<pre class="fragment">useModMapMods = level1;
</pre><p> When set to <code>level1</code>, the interpret will only match keysyms which are on the first level of the first group of the keys. This can be useful in conjunction with e.g. a <code>virtualModifier</code> statement, because <code>virtualModifier</code> is an attribute of the key rather than a specific level.</p>
<p>Note: the other possible value is <code>any</code> and is the default value.</p>
<h3><a class="anchor" id="autotoc_md32"></a>
“action” statement</h3>
<pre class="fragment">action = LockMods(modifiers=NumLock);
</pre><p> Bind this action to the matching levels. See <a class="el" href="keymap-text-format-v1.html#key-actions">key actions</a> for the list of available key actions.</p>
<h3><a class="anchor" id="autotoc_md33"></a>
“virtualModifier” statement</h3>
<pre class="fragment">virtualModifier = NumLock;
</pre><p> Add this virtual modifier to the key's <code>vmodmap</code>. The given virtual modifier must be declared at the top level of the file with a <code>virtual_modifiers</code> statement, e.g.: </p><pre class="fragment">virtual_modifiers NumLock;
</pre> <h3><a class="anchor" id="autotoc_md34"></a>
“repeat” statement</h3>
<pre class="fragment">repeat = True;
</pre><p> Set whether the key should repeat or not. Must be a boolean value.</p>
<h2><a class="anchor" id="indicator-effect"></a>
LED map statements</h2>
<p>Statements of the form: </p><pre class="fragment">indicator "Shift Lock" { ... }
</pre><p> This statement specifies the behavior and binding of the LED (AKA <a class="el" href="keymap-text-format-v1.html#indicator-def">indicator</a>) with the given name ("Shift Lock" above). The name should have been declared previously in the <code>xkb_keycodes</code> section (see <a class="el" href="keymap-text-format-v1.html#indicator-name">LED name</a> statement), and given an index there. If it wasn't, it is created with the next free index.</p>
<p>The body of the statement describes the conditions of the keyboard state which will cause the LED to be lit. It may include the following statements:</p>
<h3><a class="anchor" id="autotoc_md35"></a>
“modifiers” statement</h3>
<pre class="fragment">modifiers = ScrollLock;
</pre><p> If the given <a class="el" href="keymap-text-format-v1.html#modifier-def">modifiers</a> are in the required state (see below), the LED is lit.</p>
<h3><a class="anchor" id="autotoc_md36"></a>
“whichModState” statement</h3>
<pre class="fragment">whichModState = Latched+Locked;
</pre><p> Can be any combination of:</p>
<ul>
<li><code>base</code>, <code>latched</code>, <code>locked</code>, <code>effective</code></li>
<li><code>any</code> (i.e. all of the above)</li>
<li><code>none</code> (i.e. none of the above)</li>
<li><code>compat</code> (legacy value, treated as effective)</li>
</ul>
<p>This will cause the respective portion of the modifier state (see <code>struct <a class="el" href="structxkb__state.html" title="Opaque keyboard state object.">xkb_state</a></code>) to be matched against the modifiers given in the <code>modifiers</code> statement.</p>
<p>Here's a simple example: </p><pre class="fragment">indicator "Num Lock" {
    modifiers = NumLock;
    whichModState = Locked;
};
</pre><p> Whenever the NumLock modifier is locked, the Num Lock LED will light up.</p>
<h3><a class="anchor" id="autotoc_md37"></a>
“groups” statement</h3>
<pre class="fragment">groups = All - group1;
</pre><p> If the given groups are in the required state (see below), the LED is lit.</p>
<h3><a class="anchor" id="autotoc_md38"></a>
“whichGroupState” statement</h3>
<pre class="fragment">whichGroupState = Effective;
</pre><p> Can be any combination of:</p>
<ul>
<li><code>base</code>, <code>latched</code>, <code>locked</code>, <code>effective</code></li>
<li><code>any</code> (i.e. all of the above)</li>
<li><code>none</code> (i.e. none of the above)</li>
</ul>
<p>This will cause the respective portion of the group state (see <code>struct <a class="el" href="structxkb__state.html" title="Opaque keyboard state object.">xkb_state</a></code>) to be matched against the groups given in the <code>groups</code> statement.</p>
<p>Note: the above conditions are disjunctive, i.e. if any of them are satisfied the LED is lit.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Default values</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>e.g. <code>setMods.clearLocks= True;</code></dd></dl>
<h1><a class="anchor" id="the-xkb_symbols-section"></a>
The “xkb_symbols” section</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>complete this section.</dd></dl>
<p>This section is the fourth to be processed, after <code>xkb_keycodes</code>, <code>xkb_types</code> and <code>xkb_compat</code>.</p>
<p>Statements of the form: </p><pre class="fragment">xkb_symbols "basic" {
    ...
}
</pre><p> Declare a symbols map named <code>basic</code>. Statements inside the curly braces only affect the symbols map.</p>
<p>A map can have various flags applied to it above the statement, separated by whitespace: </p><pre class="fragment">partial alphanumeric_keys
xkb_symbols "basic" {
    ...
}
</pre><p> The possible flags are:</p>
<ul>
<li><code>partial</code> - Indicates that the map doesn't cover a complete keyboard.</li>
<li><code>default</code> - Marks the symbol map as the default map in the file when no explicit map is specified. If no map is marked as a default, the first map in the file is the default.</li>
<li><code>hidden</code> - Variant that can only be used internally</li>
<li><code>alphanumeric_keys</code> - Indicates that the map contains alphanumeric keys</li>
<li><code>modifier_keys</code> - Indicates that the map contains modifier keys</li>
<li><code>keypad_keys</code> - Indicates that the map contains keypad keys</li>
<li><code>function_keys</code> - Indicates that the map contains function keys</li>
<li><code>alternate_group</code> - Indicates that the map contains keys for an alternate group</li>
</ul>
<p>If no <code>*_keys</code> flags are supplied, then the map is assumed to cover a complete keyboard.</p>
<p>At present, except for <code>default</code>, none of the flags affect key processing in libxkbcommon, and only serve as metadata.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Name statements</h2>
<p>Statements of the form: </p><pre class="fragment">name[Group1] = "US/ASCII";
groupName[1] = "US/ASCII";
</pre><p> Gives the name "US/ASCII" to the first group of symbols. Other groups can be named using a different group index (ex: <code>Group2</code>), and with a different name. A group must be named.</p>
<p><code>group</code> and <code>groupName</code> mean the same thing, and the <code>Group</code> in <code>Group1</code> is optional.</p>
<h2><a class="anchor" id="autotoc_md41"></a>
Include statements</h2>
<p>Statements of the form: </p><pre class="fragment">include "nokia_vndr/rx-51(nordic_base)"
</pre><p> Will include data from another <code>xkb_symbols</code> section, possibly located in another file. Here it would include the <code>xkb_symbols</code> section called <code>nordic_base</code>, from the file <code>rx-51</code> located in the <code>nokia_vndr</code> folder, itself located in an XKB include path.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Key statement</h2>
<p>Statements of the form: </p><pre class="fragment">key &lt;AD01&gt; { [ q, Q ] };
</pre><p> Describes the mapping of a keycode <code>&lt;AD01&gt;</code> to a given group of symbols. The possible keycodes are the keycodes defined in the <code>xkb_keycodes</code> section.</p>
<p>Symbols are named using the symbolic names from the <code><a class="el" href="xkbcommon-keysyms_8h.html" title="Key symbols (keysyms) definitions.">xkbcommon/xkbcommon-keysyms.h</a></code> file. A group of symbols is enclosed in brackets and separated by commas. Each element of the symbol arrays corresponds to a different modifier level. In this example, the symbol (keysym) <code>XKB_KEY_q</code> for level 1 and <code>XKB_KEY_Q</code> for level 2.</p>
<h3><a class="anchor" id="autotoc_md43"></a>
Actions</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>how to bind key actions</dd></dl>
<p>For further details see <a class="el" href="keymap-text-format-v1.html#key-actions">key actions</a>.</p>
<h3><a class="anchor" id="autotoc_md44"></a>
Groups</h3>
<p>Each group represents a list of symbols mapped to a keycode: </p><pre class="fragment">name[Group1]= "US/ASCII";
name[Group2]= "Russian";
...
key &lt;AD01&gt; { [ q, Q ],
             [ Cyrillic_shorti, Cyrillic_SHORTI ] };
</pre><p> A long-form syntax can also be used: </p><pre class="fragment">key &lt;AD01&gt; {
    symbols[Group1]= [ q, Q ],
    symbols[Group2]= [ Cyrillic_shorti, Cyrillic_SHORTI ]
};
</pre><p> Groups can also be omitted, but the brackets must be present. The following statement only defines the Group3 of a mapping: </p><pre class="fragment">key &lt;AD01&gt; { [], [], [ q, Q ] };
</pre> <h3><a class="anchor" id="autotoc_md45"></a>
Additional attributes</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>virtualmodifiers, repeats</dd></dl>
<h1><a class="anchor" id="virtual-modifier-statements"></a>
Virtual modifier statements</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>rework this section</dd></dl>
<p>Statements of the form: </p><pre class="fragment">virtual_modifiers LControl;
</pre><p> Can appear in the <code>xkb_types</code>, <code>xkb_compat</code>, <code>xkb_symbols</code> sections.</p>
<h1><a class="anchor" id="modifiers-bindings"></a>
Modifiers bindings</h1>
<h2><a class="anchor" id="autotoc_md46"></a>
Real and virtual modifiers</h2>
<p>Modifiers are a particularly tricky part of XKB. For historical reasons they are divided in two categories: <a class="el" href="keymap-text-format-v1.html#real-modifier-def">real modifiers</a> and <a class="el" href="keymap-text-format-v1.html#virtual-modifier-def">virtual modifiers</a>.</p>
<p>Note that in X11, the maximum of virtual modifiers is 16 (see <code>XkbNumVirtualMods</code>).</p>
<p>The following table summarizes the modifiers defined in <code><a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config">xkeyboard-config</a></code> (this is subject to change).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Modifier   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Compat files   </th><th class="markdownTableHeadNone">Associated keysyms    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Shift</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>compat/basic</code>   </td><td class="markdownTableBodyNone"><code>Shift_L</code>, <code>Shift_R</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone"><code>compat/iso9995</code>   </td><td class="markdownTableBodyNone"><code>Shift_L</code>, <code>Shift_R</code>, <code>ISO_Level2_Latch</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Lock</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>compat/basic</code>,   </td><td class="markdownTableBodyNone"><code>Caps_Lock</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone"><code>compat/caps</code>   </td><td class="markdownTableBodyNone">″    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Control</code>   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone"><code>compat/basic</code>   </td><td class="markdownTableBodyNone"><code>Control_L</code>, <code>Control_R</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Alt</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/misc</code>,   </td><td class="markdownTableBodyNone"><code>Alt_L</code>, <code>Alt_R</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone"><code>compat/pc</code>   </td><td class="markdownTableBodyNone">″    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Meta</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/misc</code>   </td><td class="markdownTableBodyNone"><code>Meta_L</code>, <code>Meta_R</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Super</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/misc</code>   </td><td class="markdownTableBodyNone"><code>Super_L</code>, <code>Super_R</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Hyper</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/misc</code>   </td><td class="markdownTableBodyNone"><code>Hyper_L</code>, <code>Hyper_R</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ScrollLock</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/misc</code>   </td><td class="markdownTableBodyNone"><code>Scroll_Lock</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>NumLock</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/basic</code>,   </td><td class="markdownTableBodyNone"><code>Num_Lock</code>,    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone">″   </td><td class="markdownTableBodyNone"><code>compat/level5</code>   </td><td class="markdownTableBodyNone">(<code>ISO_Level5_Lock</code>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LevelThree</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/iso9995</code>   </td><td class="markdownTableBodyNone"><code>ISO_Level3_Shift</code>, <code>ISO_Level3_Latch</code>, <code>ISO_Level3_Lock</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LevelFive</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/level5</code>   </td><td class="markdownTableBodyNone"><code>ISO_Level5_Shift</code>, <code>ISO_Level5_Latch</code>, <code>ISO_Level5_Lock</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Kana_Lock</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/japan</code>   </td><td class="markdownTableBodyNone"><code>Kana_Lock</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Square</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/olpc</code>   </td><td class="markdownTableBodyNone"><code>KP_Home</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Cross</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/olpc</code>   </td><td class="markdownTableBodyNone"><code>KP_Next</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Circle</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/olpc</code>   </td><td class="markdownTableBodyNone"><code>KP_End</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Triangle</code>   </td><td class="markdownTableBodyNone">Virtual   </td><td class="markdownTableBodyNone"><code>compat/olpc</code>   </td><td class="markdownTableBodyNone"><code>KP_Prior</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md47"></a>
Define and use a modifier</h2>
<p>We will use the example of the <em>real</em> modifier <code>Shift</code> and the virtual modifier <code>LevelThree</code> in <code>xkeyboard-config</code>.</p>
<p>In order to define and use a modifier, one must:</p>
<ol type="1">
<li><p class="startli">Define its behavior and <a class="el" href="keymap-text-format-v1.html#keysym-def">keysym</a> binding in the <code><a class="el" href="keymap-text-format-v1.html#the-xkb_compat-section">xkb_compat</a></code> section:</p>
<div class="fragment"><div class="line"><span class="comment">// Declare virtual modifiers. Shift being real modifier,</span></div>
<div class="line"><span class="comment">// we do not need to add it here.</span></div>
<div class="line">virtual_modifiers LevelThree;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set defaults. They are overridden if set directly in the xkb_symbols.</span></div>
<div class="line">interpret.repeat= False; <span class="comment">// only applied on first level</span></div>
<div class="line">setMods.clearLocks= True;</div>
<div class="line">latchMods.clearLocks= True;</div>
<div class="line">latchMods.latchToLock= True;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Default statement for real modifiers: any key bound to a real</span></div>
<div class="line"><span class="comment">// modifier via modifier_map will set this modifier at all its</span></div>
<div class="line"><span class="comment">// levels.</span></div>
<div class="line"><span class="comment">// Here only to illustrate: do not add it!</span></div>
<div class="line">interpret Any + Any {</div>
<div class="line">    action= SetMods(modifiers=modMapMods);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Shift being real modifier, we do not need a corresponding</span></div>
<div class="line"><span class="comment">// interpret statement because the previous one suffices.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Let’s associate LevelThree to the keysym ISO_Level3_Shift</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// First, match the keys and their levels with the</span></div>
<div class="line"><span class="comment">// ISO_Level3_Shift keysym and with any real modifier</span></div>
<div class="line"><span class="comment">// (Any = AnyOf(all)) in its modmap.</span></div>
<div class="line">interpret ISO_Level3_Shift+Any {</div>
<div class="line">    <span class="comment">// Only match the first level of the first group</span></div>
<div class="line">    useModMapMods= level1;</div>
<div class="line">    <span class="comment">// Add the virtual modifier to the key’s vmodmap</span></div>
<div class="line">    virtualModifier= LevelThree;</div>
<div class="line">    <span class="comment">// Activate the LevelThree modifier (depressed mode)</span></div>
<div class="line">    action= SetMods(modifiers=LevelThree);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Then for keys and their levels with the</span></div>
<div class="line"><span class="comment">// ISO_Level3_Shift keysym but with either no real modifier</span></div>
<div class="line"><span class="comment">// in its modmap or a level higher than 1.</span></div>
<div class="line"><span class="comment">// Indeed:</span></div>
<div class="line"><span class="comment">// • In case the level is higher than 1 there is no match</span></div>
<div class="line"><span class="comment">//   in the previous statement.</span></div>
<div class="line"><span class="comment">// • The condition is equivalent to</span></div>
<div class="line"><span class="comment">//   ISO_Level3_Shift+AnyOfOrNone(all), but since</span></div>
<div class="line"><span class="comment">//   the previous statement ISO_Level3_Shift+Any is more</span></div>
<div class="line"><span class="comment">//   specific, it will be matched before this one.</span></div>
<div class="line">interpret ISO_Level3_Shift {</div>
<div class="line">    <span class="comment">// Activate the LevelThree modifier (depressed mode)</span></div>
<div class="line">    action= SetMods(modifiers=LevelThree);</div>
<div class="line">};</div>
</div><!-- fragment --></li>
<li><p class="startli">Define <a class="el" href="keymap-text-format-v1.html#key-type-def">key types</a> that use it in the <code><a class="el" href="keymap-text-format-v1.html#the-xkb_types-section">xkb_types</a></code> section:</p>
<div class="fragment"><div class="line"><span class="comment">// Declare virtual modifiers. Shift being real modifier,</span></div>
<div class="line"><span class="comment">// we do not need to add it here.</span></div>
<div class="line">virtual_modifiers LevelThree;</div>
<div class="line"> </div>
<div class="line">type <span class="stringliteral">&quot;FOUR_LEVEL&quot;</span> {</div>
<div class="line">    <span class="comment">// Key type modifier mask: all the modifiers used in the key type</span></div>
<div class="line">    modifiers = Shift + LevelThree;</div>
<div class="line">    map[None] = Level1;</div>
<div class="line">    map[Shift] = Level2;</div>
<div class="line">    map[LevelThree] = Level3;</div>
<div class="line">    map[Shift+LevelThree] = Level4;</div>
<div class="line">    level_name[Level1] = <span class="stringliteral">&quot;Base&quot;</span>;</div>
<div class="line">    level_name[Level2] = <span class="stringliteral">&quot;Shift&quot;</span>;</div>
<div class="line">    level_name[Level3] = <span class="stringliteral">&quot;AltGr&quot;</span>;</div>
<div class="line">    level_name[Level4] = <span class="stringliteral">&quot;Shift AltGr&quot;</span>;</div>
<div class="line">};</div>
</div><!-- fragment --></li>
<li><p class="startli">Bind it to a <a class="el" href="keymap-text-format-v1.html#keycode-def">keycode</a> in the <code><a class="el" href="keymap-text-format-v1.html#the-xkb_symbols-section">xkb_symbols</a></code> section:</p><ol type="a">
<li>Map <a class="el" href="keymap-text-format-v1.html#keysym-def">keysyms</a> used in the <code>xkb_compat</code> section hereinabove.</li>
<li>Bind <a class="el" href="keymap-text-format-v1.html#real-modifier-def">real modifiers</a> to keys using these keysyms with <code>modifier_map</code>.</li>
</ol>
<p class="startli"><em>Note:</em> Only one key binding to real modifier is required. The corresponding keysym must then be on the first level of the first Group.</p>
<p class="startli"><em>Note:</em> One can optionally bind directly a virtual modifier to a key using <code>virtualmodifiers</code> instead of doing it in the <code>xkb_compat</code> section. But the recommended way is to use the <code>xkb_compat</code> section.</p>
<div class="fragment"><div class="line"><span class="comment">// Shift: defined in pc symbols</span></div>
<div class="line">key &lt;LFSH&gt; {[  Shift_L    ]};</div>
<div class="line">key &lt;RTSH&gt; {[  Shift_R    ]};</div>
<div class="line">modifier_map Shift { Shift_L, Shift_R };</div>
<div class="line"><span class="comment">// The previous will resolve to:</span></div>
<div class="line"><span class="comment">// modifier_map Shift { &lt;LFSH&gt;, &lt;RTSH&gt; };</span></div>
<div class="line"><span class="comment">// Thus the real modifier Shift is added to the modmap of</span></div>
<div class="line"><span class="comment">// &lt;LFSH&gt; and &lt;RTSH&gt;.</span></div>
<div class="line"><span class="comment">// The “Any + Any” interpret statement matches &lt;LFSH&gt; and &lt;RTSH&gt;,</span></div>
<div class="line"><span class="comment">// therefore these keys set the Shift modifier.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// LevelThree: defined in pc symbols</span></div>
<div class="line"><span class="comment">// With the following 2 lines:</span></div>
<div class="line"><span class="comment">// 1. The modifier keysym is on the first level of the first group.</span></div>
<div class="line"><span class="comment">// 2. The real modifier Mod5 is bound to &lt;LVL3&gt;,</span></div>
<div class="line"><span class="comment">//    i.e. Mod5 is added to its modmap.</span></div>
<div class="line"><span class="comment">// 3. It matches the interpret statement “ISO_Level3_Shift+Any”,</span></div>
<div class="line"><span class="comment">//    which adds the LevelThree modifier to the vmodmap of &lt;LVL3&gt;.</span></div>
<div class="line"><span class="comment">// 4. The mapping of LevelThree to real modifiers is the union</span></div>
<div class="line"><span class="comment">//    of modmaps with corresponding vmodmaps containing</span></div>
<div class="line"><span class="comment">//    LevelThree. In our case there is only one: therefore</span></div>
<div class="line"><span class="comment">//    LevelThree maps to Mod5.</span></div>
<div class="line">key &lt;LVL3&gt; {[  ISO_Level3_Shift  ]};</div>
<div class="line">modifier_map Mod5  { &lt;LVL3&gt; };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// LevelThree: defined in level3 symbols</span></div>
<div class="line"><span class="comment">// Not bound to a real modifier, so interpret statement</span></div>
<div class="line"><span class="comment">// “ISO_Level3_Shift” applies.</span></div>
<div class="line">key &lt;RALT&gt; {[ISO_Level3_Shift], type[group1]=<span class="stringliteral">&quot;ONE_LEVEL&quot;</span> };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Note: we could have the following line, but it is not necessary</span></div>
<div class="line"><span class="comment">// because we have the mappings of &lt;LVL3&gt;.</span></div>
<div class="line"><span class="comment">// modifier_map Mod5  { &lt;RALT&gt; };</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Warning: if we had the for example the following line, the</span></div>
<div class="line"><span class="comment">// mapping of LevelThree to real modifiers would be “Mod1+Mod5”.</span></div>
<div class="line"><span class="comment">// modifier_map Mod1  { &lt;RALT&gt; };</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Alternative definitions, without using interpret statements</span></div>
<div class="line">virtual_modifiers LevelThree;</div>
<div class="line">key &lt;LVL3&gt; { virtualmodifiers=LevelThree</div>
<div class="line">           , repeats=False</div>
<div class="line">           , symbols[Group1] = [ISO_Level3_Shift]</div>
<div class="line">           , actions[Group1] = [SetMods(modifiers=LevelThree)] };</div>
<div class="line">modifier_map Mod5  { &lt;LVL3&gt; };</div>
<div class="line">key &lt;RALT&gt; { repeat=False</div>
<div class="line">           , symbols[Group1] = [ISO_Level3_Shift]</div>
<div class="line">           , actions[Group1] = [SetMods(modifiers=LevelThree)]</div>
<div class="line">           , type[group1]=<span class="stringliteral">&quot;ONE_LEVEL&quot;</span> };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// FOUR_LEVEL key type example from latin symbols</span></div>
<div class="line">key &lt;AB05&gt; {[b, B, leftdoublequotemark, leftsinglequotemark]};</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="key-actions"></a>
Key actions</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>list of all actions and their parameters</dd></dl>
<p>The following table provide an overview of the available actions:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Alias   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>NoAction</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Do nothing.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" rowspan="3"><a class="el" href="keymap-text-format-v1.html#modifiers-actions">Modifier action</a>   </td><td class="markdownTableBodyNone"><code>SetMods</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Modifies the <em>depressed</em> modifiers    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LatchMods</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Modifies the <em>latched</em> modifiers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LockMods</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Modifies the <em>locked</em> modifiers    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="3"><a class="el" href="keymap-text-format-v1.html#group-actions">Group action</a>   </td><td class="markdownTableBodyNone"><code>SetGroup</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LatchGroup</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LockGroup</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" rowspan="9"><a class="el" href="keymap-text-format-v1.html#legacy-actions">Legacy action</a>   </td><td class="markdownTableBodyNone"><code>MovePointer</code>   </td><td class="markdownTableBodyNone"><code>MovePtr</code>   </td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PointerButton</code>   </td><td class="markdownTableBodyNone"><code>PtrBtn</code>   </td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LockPointerButton</code>   </td><td class="markdownTableBodyNone"><code>LockPtrBtn</code>   </td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SetPointerDefault</code>   </td><td class="markdownTableBodyNone"><code>SetPtrDflt</code>   </td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SetControls</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LockControls</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>TerminateServer</code>   </td><td class="markdownTableBodyNone"><code>Terminate</code>   </td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SwitchScreen</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Private</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><span class="todo">TODO</span>   </td></tr>
</table>
<p>Common syntax:</p><ul>
<li>Boolean values:<ul>
<li><code>true</code>, <code>yes</code>, <code>on</code></li>
<li><code>false</code>, <code>no</code>, <code>off</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="modifiers-actions"></a>
Modifiers actions</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>default values</dd></dl>
<p>There are 3 modifiers actions:</p>
<dl>
<dt><code>SetMods</code> </dt>
<dd><p class="startdd">Modifies the <em>depressed</em> modifiers.</p>
<p class="enddd">Parameters:</p><ul>
<li><code>modifiers</code> or <code>mods</code>: the list of modifiers to modify, separated by <code>+</code>, or the special value <code>modMapMods</code>. The latter means the parameter value has to be read from the <code>vmodmap</code> attribute of the key.</li>
<li><code>clearLocks</code>: boolean (see its use hereinafter).  </li>
</ul>
</dd>
<dt><code>LatchMods</code> </dt>
<dd><p class="startdd">Modifies the <em>latched</em> modifiers</p>
<p class="enddd">Parameters:</p><ul>
<li><code>modifiers</code> or <code>mods</code>: see <code>SetMods</code>.</li>
<li><code>clearLocks</code>: boolean (see its use hereinafter).</li>
<li><code>latchToLock</code>: boolean (see its use hereinafter).  </li>
</ul>
</dd>
<dt><code>LockMods</code> </dt>
<dd><p class="startdd">Modifies the <em>locked</em> modifiers.</p>
<p class="enddd">Parameters:</p><ul>
<li><code>modifiers</code> or <code>mods</code>: see <code>SetMods</code>.</li>
<li><code>affect</code>:<ul>
<li><code>lock</code>: the action only locks the modifier, but cannot unlock it.</li>
<li><code>unlock</code>: the action only unlocks modifier, but cannot lock it.</li>
<li><code>both</code>: the first key press locks the modifier and the second key press releases the modifier. It is a default mode.</li>
<li><code>neither</code>: do not lock nor unlock, i.e. do nothing.  </li>
</ul>
</li>
</ul>
</dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000013">Todo:</a></b></dt><dd>highlight that there is reference counting for the modifiers, e.g. to manage multiple physical keys for the same modifier.</dd></dl>
<p>These actions perform different tasks on key press and on key release:</p>
<table class="doxtable">
<caption>Effects of modifiers actions </caption>
<tr>
<th>Action </th><th>On key press </th><th><p class="starttd">On key release </p>
<p class="endtd"></p>
</th></tr>
<tr>
<th><code>SetMods</code> </th><td><ul>
<li>
Adds modifiers to <em>depressed</em> modifiers </li>
</ul>
</td><td><ul>
<li>
Removes modifiers from <em>depressed</em> modifiers, provided that no other key which affects the same modifiers is logically down.  </li>
<li>
If <code>clearLocks=yes</code> and no other key were operated simultaneously with this key, then the modifiers will be removed as well from the <em>locked</em> modifiers.  </li>
</ul>
</td></tr>
<tr>
<th><code>LatchMods</code> </th><td><ul>
<li>
Adds modifiers to <em>latched</em> modifiers. </li>
</ul>
</td><td><ul>
<li>
Removes modifiers from <em>latched</em> modifiers. </li>
<li>
If <code>clearLocks=yes</code> and no other key has been pressed since this key press, then the modifiers will be removed as well from the <em>locked</em> modifiers.  </li>
<li>
If <code>latchToLock=yes</code> then the modifiers are added to the <em>locked</em> modifiers.  </li>
</ul>
</td></tr>
<tr>
<th><code>LockMods</code>  </th><td><ul>
<li>
Adds modifiers to <em>depressed</em> modifiers. </li>
<li>
Toggle these modifiers in <em>locked</em> modifiers.  </li>
</ul>
</td><td><ul>
<li>
Removes modifiers from <em>depressed</em> modifiers. </li>
<li>
<em>Locked</em> modifiers stay unchanged. </li>
</ul>
<p class="endtd"></p>
</td></tr>
</table>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000014">Todo:</a></b></dt><dd>Finish</dd></dl>
<h2><a class="anchor" id="group-actions"></a>
Group actions</h2>
<p>There are 3 group actions:</p>
<dl>
<dt>SetGroup </dt>
<dd><span class="todo">TODO</span>  </dd>
<dt>LatchGroup </dt>
<dd><span class="todo">TODO</span>  </dd>
<dt>LockGroup </dt>
<dd><span class="todo">TODO</span>  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000015">Todo:</a></b></dt><dd>Describe each action</dd></dl>
<h2><a class="anchor" id="legacy-actions"></a>
Unsupported legacy actions</h2>
<dl class="section attention"><dt>Attention</dt><dd>The following legacy actions are kept for compatibility only: they are parsed and validated but have no effect. This allows to use keymaps defined in <code><a href="https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config">xkeyboard-config</a></code> for both X11 and Wayland.</dd></dl>
<h3><a class="anchor" id="autotoc_md48"></a>
Pointer actions</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Alias   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>MovePointer</code>   </td><td class="markdownTableBodyNone"><code>MovePtr</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PointerButton</code>   </td><td class="markdownTableBodyNone"><code>PtrBtn</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LockPtrButton</code>   </td><td class="markdownTableBodyNone"><code>LockPtrBtn</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LockPointerButton</code>   </td><td class="markdownTableBodyNone"><code>LockPointerBtn</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SetPointerDefault</code>   </td><td class="markdownTableBodyNone"><code>SetPtrDflt</code>   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>Describe each action</dd></dl>
<h3><a class="anchor" id="autotoc_md49"></a>
Control flags actions</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000017">Todo:</a></b></dt><dd><code>SetControls</code>, <code>LockControls</code></dd></dl>
<h3><a class="anchor" id="autotoc_md50"></a>
Server actions</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo:</a></b></dt><dd><code>TerminateServer</code>, <code>SwitchScreen</code></dd></dl>
<h3><a class="anchor" id="autotoc_md51"></a>
Private action</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000019">Todo:</a></b></dt><dd><code>Private</code> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
